let i;const S=new Array(128).fill(void 0);S.push(void 0,null,!0,!1);let at=S.length;function et(a){at===S.length&&S.push(S.length+1);const t=at;return at=S[t],S[t]=a,t}function Kr(a){return S[a]}function Yr(a){a<132||(S[a]=at,at=a)}function Ht(a){const t=Kr(a);return Yr(a),t}function g(a){return a==null}let pt=null;function Lt(){return(pt===null||pt.byteLength===0)&&(pt=new Float64Array(i.memory.buffer)),pt}let ut=null;function C(){return(ut===null||ut.byteLength===0)&&(ut=new Int32Array(i.memory.buffer)),ut}const Zr=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let br=new Zr("utf-8",{ignoreBOM:!0,fatal:!0});br.decode();let bt=null;function $r(){return(bt===null||bt.byteLength===0)&&(bt=new Uint8Array(i.memory.buffer)),bt}function Qr(a,t){return a=a>>>0,br.decode($r().subarray(a,a+t))}function te(){let a,t;try{const n=i.__wbindgen_add_to_stack_pointer(-16);i.version(n);var r=C()[n/4+0],e=C()[n/4+1];return a=r,t=e,Qr(r,e)}finally{i.__wbindgen_add_to_stack_pointer(16),i.__wbindgen_free(a,t,1)}}function _(a,t){if(!(a instanceof t))throw new Error(`expected instance of ${t.name}`);return a.ptr}let gt=null;function J(){return(gt===null||gt.byteLength===0)&&(gt=new Float32Array(i.memory.buffer)),gt}let v=128;function I(a){if(v==1)throw new Error("out of js stack");return S[--v]=a,v}function pr(a,t){return a=a>>>0,J().subarray(a/4,a/4+t)}let mt=null;function gr(){return(mt===null||mt.byteLength===0)&&(mt=new Uint32Array(i.memory.buffer)),mt}function re(a,t){return a=a>>>0,gr().subarray(a/4,a/4+t)}let F=0;function Y(a,t){const r=t(a.length*4,4)>>>0;return J().set(a,r/4),F=a.length,r}function ur(a,t){const r=t(a.length*4,4)>>>0;return gr().set(a,r/4),F=a.length,r}const k=Object.freeze({Ball:0,0:"Ball",Cuboid:1,1:"Cuboid",Capsule:2,2:"Capsule",Segment:3,3:"Segment",Polyline:4,4:"Polyline",Triangle:5,5:"Triangle",TriMesh:6,6:"TriMesh",HeightField:7,7:"HeightField",Compound:8,8:"Compound",ConvexPolygon:9,9:"ConvexPolygon",RoundCuboid:10,10:"RoundCuboid",RoundTriangle:11,11:"RoundTriangle",RoundConvexPolygon:12,12:"RoundConvexPolygon",HalfSpace:13,13:"HalfSpace"}),X=Object.freeze({Revolute:0,0:"Revolute",Fixed:1,1:"Fixed",Prismatic:2,2:"Prismatic",Rope:3,3:"Rope",Spring:4,4:"Spring",Generic:5,5:"Generic"}),Et=Object.freeze({X:0,0:"X",Y:1,1:"Y",AngX:2,2:"AngX"});class Q{static __wrap(t){t=t>>>0;const r=Object.create(Q.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawbroadphase_free(t)}constructor(){const t=i.rawbroadphase_new();return this.__wbg_ptr=t>>>0,this}}class Gt{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawccdsolver_free(t)}constructor(){const t=i.rawccdsolver_new();return this.__wbg_ptr=t>>>0,this}}class mr{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawcharactercollision_free(t)}constructor(){const t=i.rawcharactercollision_new();return this.__wbg_ptr=t>>>0,this}handle(){return i.rawcharactercollision_handle(this.__wbg_ptr)}translationDeltaApplied(){const t=i.rawcharactercollision_translationDeltaApplied(this.__wbg_ptr);return w.__wrap(t)}translationDeltaRemaining(){const t=i.rawcharactercollision_translationDeltaRemaining(this.__wbg_ptr);return w.__wrap(t)}toi(){return i.rawcharactercollision_toi(this.__wbg_ptr)}worldWitness1(){const t=i.rawcharactercollision_worldWitness1(this.__wbg_ptr);return w.__wrap(t)}worldWitness2(){const t=i.rawcharactercollision_worldWitness2(this.__wbg_ptr);return w.__wrap(t)}worldNormal1(){const t=i.rawcharactercollision_worldNormal1(this.__wbg_ptr);return w.__wrap(t)}worldNormal2(){const t=i.rawcharactercollision_worldNormal2(this.__wbg_ptr);return w.__wrap(t)}}class P{static __wrap(t){t=t>>>0;const r=Object.create(P.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawcolliderset_free(t)}coTranslation(t){const r=i.rawcolliderset_coTranslation(this.__wbg_ptr,t);return w.__wrap(r)}coRotation(t){const r=i.rawcolliderset_coRotation(this.__wbg_ptr,t);return y.__wrap(r)}coSetTranslation(t,r,e){i.rawcolliderset_coSetTranslation(this.__wbg_ptr,t,r,e)}coSetTranslationWrtParent(t,r,e){i.rawcolliderset_coSetTranslationWrtParent(this.__wbg_ptr,t,r,e)}coSetRotation(t,r){i.rawcolliderset_coSetRotation(this.__wbg_ptr,t,r)}coSetRotationWrtParent(t,r){i.rawcolliderset_coSetRotationWrtParent(this.__wbg_ptr,t,r)}coIsSensor(t){return i.rawcolliderset_coIsSensor(this.__wbg_ptr,t)!==0}coShapeType(t){return i.rawcolliderset_coShapeType(this.__wbg_ptr,t)}coHalfspaceNormal(t){const r=i.rawcolliderset_coHalfspaceNormal(this.__wbg_ptr,t);return r===0?void 0:w.__wrap(r)}coHalfExtents(t){const r=i.rawcolliderset_coHalfExtents(this.__wbg_ptr,t);return r===0?void 0:w.__wrap(r)}coSetHalfExtents(t,r){_(r,w),i.rawcolliderset_coSetHalfExtents(this.__wbg_ptr,t,r.__wbg_ptr)}coRadius(t){try{const n=i.__wbindgen_add_to_stack_pointer(-16);i.rawcolliderset_coRadius(n,this.__wbg_ptr,t);var r=C()[n/4+0],e=J()[n/4+1];return r===0?void 0:e}finally{i.__wbindgen_add_to_stack_pointer(16)}}coSetRadius(t,r){i.rawcolliderset_coSetRadius(this.__wbg_ptr,t,r)}coHalfHeight(t){try{const n=i.__wbindgen_add_to_stack_pointer(-16);i.rawcolliderset_coHalfHeight(n,this.__wbg_ptr,t);var r=C()[n/4+0],e=J()[n/4+1];return r===0?void 0:e}finally{i.__wbindgen_add_to_stack_pointer(16)}}coSetHalfHeight(t,r){i.rawcolliderset_coSetHalfHeight(this.__wbg_ptr,t,r)}coRoundRadius(t){try{const n=i.__wbindgen_add_to_stack_pointer(-16);i.rawcolliderset_coRoundRadius(n,this.__wbg_ptr,t);var r=C()[n/4+0],e=J()[n/4+1];return r===0?void 0:e}finally{i.__wbindgen_add_to_stack_pointer(16)}}coSetRoundRadius(t,r){i.rawcolliderset_coSetRoundRadius(this.__wbg_ptr,t,r)}coVertices(t){try{const n=i.__wbindgen_add_to_stack_pointer(-16);i.rawcolliderset_coVertices(n,this.__wbg_ptr,t);var r=C()[n/4+0],e=C()[n/4+1];let s;return r!==0&&(s=pr(r,e).slice(),i.__wbindgen_free(r,e*4,4)),s}finally{i.__wbindgen_add_to_stack_pointer(16)}}coIndices(t){try{const n=i.__wbindgen_add_to_stack_pointer(-16);i.rawcolliderset_coIndices(n,this.__wbg_ptr,t);var r=C()[n/4+0],e=C()[n/4+1];let s;return r!==0&&(s=re(r,e).slice(),i.__wbindgen_free(r,e*4,4)),s}finally{i.__wbindgen_add_to_stack_pointer(16)}}coTriMeshFlags(t){try{const n=i.__wbindgen_add_to_stack_pointer(-16);i.rawcolliderset_coTriMeshFlags(n,this.__wbg_ptr,t);var r=C()[n/4+0],e=C()[n/4+1];return r===0?void 0:e>>>0}finally{i.__wbindgen_add_to_stack_pointer(16)}}coHeightfieldHeights(t){try{const n=i.__wbindgen_add_to_stack_pointer(-16);i.rawcolliderset_coHeightfieldHeights(n,this.__wbg_ptr,t);var r=C()[n/4+0],e=C()[n/4+1];let s;return r!==0&&(s=pr(r,e).slice(),i.__wbindgen_free(r,e*4,4)),s}finally{i.__wbindgen_add_to_stack_pointer(16)}}coHeightfieldScale(t){const r=i.rawcolliderset_coHeightfieldScale(this.__wbg_ptr,t);return r===0?void 0:w.__wrap(r)}coParent(t){try{const n=i.__wbindgen_add_to_stack_pointer(-16);i.rawcolliderset_coParent(n,this.__wbg_ptr,t);var r=C()[n/4+0],e=Lt()[n/8+1];return r===0?void 0:e}finally{i.__wbindgen_add_to_stack_pointer(16)}}coSetEnabled(t,r){i.rawcolliderset_coSetEnabled(this.__wbg_ptr,t,r)}coIsEnabled(t){return i.rawcolliderset_coIsEnabled(this.__wbg_ptr,t)!==0}coSetContactSkin(t,r){i.rawcolliderset_coSetContactSkin(this.__wbg_ptr,t,r)}coContactSkin(t){return i.rawcolliderset_coContactSkin(this.__wbg_ptr,t)}coFriction(t){return i.rawcolliderset_coFriction(this.__wbg_ptr,t)}coRestitution(t){return i.rawcolliderset_coRestitution(this.__wbg_ptr,t)}coDensity(t){return i.rawcolliderset_coDensity(this.__wbg_ptr,t)}coMass(t){return i.rawcolliderset_coMass(this.__wbg_ptr,t)}coVolume(t){return i.rawcolliderset_coVolume(this.__wbg_ptr,t)}coCollisionGroups(t){return i.rawcolliderset_coCollisionGroups(this.__wbg_ptr,t)>>>0}coSolverGroups(t){return i.rawcolliderset_coSolverGroups(this.__wbg_ptr,t)>>>0}coActiveHooks(t){return i.rawcolliderset_coActiveHooks(this.__wbg_ptr,t)>>>0}coActiveCollisionTypes(t){return i.rawcolliderset_coActiveCollisionTypes(this.__wbg_ptr,t)}coActiveEvents(t){return i.rawcolliderset_coActiveEvents(this.__wbg_ptr,t)>>>0}coContactForceEventThreshold(t){return i.rawcolliderset_coContactForceEventThreshold(this.__wbg_ptr,t)}coContainsPoint(t,r){return _(r,w),i.rawcolliderset_coContainsPoint(this.__wbg_ptr,t,r.__wbg_ptr)!==0}coCastShape(t,r,e,n,s,o,l,h,d){_(r,w),_(e,f),_(n,w),_(s,y),_(o,w);const p=i.rawcolliderset_coCastShape(this.__wbg_ptr,t,r.__wbg_ptr,e.__wbg_ptr,n.__wbg_ptr,s.__wbg_ptr,o.__wbg_ptr,l,h,d);return p===0?void 0:Tt.__wrap(p)}coCastCollider(t,r,e,n,s,o,l){_(r,w),_(n,w);const h=i.rawcolliderset_coCastCollider(this.__wbg_ptr,t,r.__wbg_ptr,e,n.__wbg_ptr,s,o,l);return h===0?void 0:It.__wrap(h)}coIntersectsShape(t,r,e,n){return _(r,f),_(e,w),_(n,y),i.rawcolliderset_coIntersectsShape(this.__wbg_ptr,t,r.__wbg_ptr,e.__wbg_ptr,n.__wbg_ptr)!==0}coContactShape(t,r,e,n,s){_(r,f),_(e,w),_(n,y);const o=i.rawcolliderset_coContactShape(this.__wbg_ptr,t,r.__wbg_ptr,e.__wbg_ptr,n.__wbg_ptr,s);return o===0?void 0:ot.__wrap(o)}coContactCollider(t,r,e){const n=i.rawcolliderset_coContactCollider(this.__wbg_ptr,t,r,e);return n===0?void 0:ot.__wrap(n)}coProjectPoint(t,r,e){_(r,w);const n=i.rawcolliderset_coProjectPoint(this.__wbg_ptr,t,r.__wbg_ptr,e);return Pt.__wrap(n)}coIntersectsRay(t,r,e,n){return _(r,w),_(e,w),i.rawcolliderset_coIntersectsRay(this.__wbg_ptr,t,r.__wbg_ptr,e.__wbg_ptr,n)!==0}coCastRay(t,r,e,n,s){return _(r,w),_(e,w),i.rawcolliderset_coCastRay(this.__wbg_ptr,t,r.__wbg_ptr,e.__wbg_ptr,n,s)}coCastRayAndGetNormal(t,r,e,n,s){_(r,w),_(e,w);const o=i.rawcolliderset_coCastRayAndGetNormal(this.__wbg_ptr,t,r.__wbg_ptr,e.__wbg_ptr,n,s);return o===0?void 0:At.__wrap(o)}coSetSensor(t,r){i.rawcolliderset_coSetSensor(this.__wbg_ptr,t,r)}coSetRestitution(t,r){i.rawcolliderset_coSetRestitution(this.__wbg_ptr,t,r)}coSetFriction(t,r){i.rawcolliderset_coSetFriction(this.__wbg_ptr,t,r)}coFrictionCombineRule(t){return i.rawcolliderset_coFrictionCombineRule(this.__wbg_ptr,t)>>>0}coSetFrictionCombineRule(t,r){i.rawcolliderset_coSetFrictionCombineRule(this.__wbg_ptr,t,r)}coRestitutionCombineRule(t){return i.rawcolliderset_coRestitutionCombineRule(this.__wbg_ptr,t)>>>0}coSetRestitutionCombineRule(t,r){i.rawcolliderset_coSetRestitutionCombineRule(this.__wbg_ptr,t,r)}coSetCollisionGroups(t,r){i.rawcolliderset_coSetCollisionGroups(this.__wbg_ptr,t,r)}coSetSolverGroups(t,r){i.rawcolliderset_coSetSolverGroups(this.__wbg_ptr,t,r)}coSetActiveHooks(t,r){i.rawcolliderset_coSetActiveHooks(this.__wbg_ptr,t,r)}coSetActiveEvents(t,r){i.rawcolliderset_coSetActiveEvents(this.__wbg_ptr,t,r)}coSetActiveCollisionTypes(t,r){i.rawcolliderset_coSetActiveCollisionTypes(this.__wbg_ptr,t,r)}coSetShape(t,r){_(r,f),i.rawcolliderset_coSetShape(this.__wbg_ptr,t,r.__wbg_ptr)}coSetContactForceEventThreshold(t,r){i.rawcolliderset_coSetContactForceEventThreshold(this.__wbg_ptr,t,r)}coSetDensity(t,r){i.rawcolliderset_coSetDensity(this.__wbg_ptr,t,r)}coSetMass(t,r){i.rawcolliderset_coSetMass(this.__wbg_ptr,t,r)}coSetMassProperties(t,r,e,n){_(e,w),i.rawcolliderset_coSetMassProperties(this.__wbg_ptr,t,r,e.__wbg_ptr,n)}constructor(){const t=i.rawcolliderset_new();return this.__wbg_ptr=t>>>0,this}len(){return i.rawcolliderset_len(this.__wbg_ptr)>>>0}contains(t){return i.rawcolliderset_contains(this.__wbg_ptr,t)!==0}createCollider(t,r,e,n,s,o,l,h,d,p,u,b,m,E,D,G,z,O,K,Nt,kt,xt,hr,dr){try{const Ft=i.__wbindgen_add_to_stack_pointer(-16);_(r,f),_(e,w),_(n,y),_(l,w),_(dr,A),i.rawcolliderset_createCollider(Ft,this.__wbg_ptr,t,r.__wbg_ptr,e.__wbg_ptr,n.__wbg_ptr,s,o,l.__wbg_ptr,h,d,p,u,b,m,E,D,G,z,O,K,Nt,kt,xt,hr,dr.__wbg_ptr);var Jr=C()[Ft/4+0],Vr=Lt()[Ft/8+1];return Jr===0?void 0:Vr}finally{i.__wbindgen_add_to_stack_pointer(16)}}remove(t,r,e,n){_(r,B),_(e,A),i.rawcolliderset_remove(this.__wbg_ptr,t,r.__wbg_ptr,e.__wbg_ptr,n)}isHandleValid(t){return i.rawcolliderset_contains(this.__wbg_ptr,t)!==0}forEachColliderHandle(t){try{i.rawcolliderset_forEachColliderHandle(this.__wbg_ptr,I(t))}finally{S[v++]=void 0}}}class It{static __wrap(t){t=t>>>0;const r=Object.create(It.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawcollidershapecasthit_free(t)}colliderHandle(){return i.rawcollidershapecasthit_colliderHandle(this.__wbg_ptr)}time_of_impact(){return i.rawcollidershapecasthit_time_of_impact(this.__wbg_ptr)}witness1(){const t=i.rawcollidershapecasthit_witness1(this.__wbg_ptr);return w.__wrap(t)}witness2(){const t=i.rawcollidershapecasthit_witness2(this.__wbg_ptr);return w.__wrap(t)}normal1(){const t=i.rawcollidershapecasthit_normal1(this.__wbg_ptr);return w.__wrap(t)}normal2(){const t=i.rawcollidershapecasthit_normal2(this.__wbg_ptr);return w.__wrap(t)}}class Vt{static __wrap(t){t=t>>>0;const r=Object.create(Vt.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawcontactmanifold_free(t)}normal(){const t=i.rawcontactmanifold_normal(this.__wbg_ptr);return w.__wrap(t)}local_n1(){const t=i.rawcontactmanifold_local_n1(this.__wbg_ptr);return w.__wrap(t)}local_n2(){const t=i.rawcontactmanifold_local_n2(this.__wbg_ptr);return w.__wrap(t)}subshape1(){return i.rawcontactmanifold_subshape1(this.__wbg_ptr)>>>0}subshape2(){return i.rawcontactmanifold_subshape2(this.__wbg_ptr)>>>0}num_contacts(){return i.rawcontactmanifold_num_contacts(this.__wbg_ptr)>>>0}contact_local_p1(t){const r=i.rawcontactmanifold_contact_local_p1(this.__wbg_ptr,t);return r===0?void 0:w.__wrap(r)}contact_local_p2(t){const r=i.rawcontactmanifold_contact_local_p2(this.__wbg_ptr,t);return r===0?void 0:w.__wrap(r)}contact_dist(t){return i.rawcontactmanifold_contact_dist(this.__wbg_ptr,t)}contact_fid1(t){return i.rawcontactmanifold_contact_fid1(this.__wbg_ptr,t)>>>0}contact_fid2(t){return i.rawcontactmanifold_contact_fid2(this.__wbg_ptr,t)>>>0}contact_impulse(t){return i.rawcontactmanifold_contact_impulse(this.__wbg_ptr,t)}contact_tangent_impulse(t){return i.rawcontactmanifold_contact_tangent_impulse(this.__wbg_ptr,t)}num_solver_contacts(){return i.rawcontactmanifold_num_solver_contacts(this.__wbg_ptr)>>>0}solver_contact_point(t){const r=i.rawcontactmanifold_solver_contact_point(this.__wbg_ptr,t);return r===0?void 0:w.__wrap(r)}solver_contact_dist(t){return i.rawcontactmanifold_solver_contact_dist(this.__wbg_ptr,t)}solver_contact_friction(t){return i.rawcontactmanifold_solver_contact_friction(this.__wbg_ptr,t)}solver_contact_restitution(t){return i.rawcontactmanifold_solver_contact_restitution(this.__wbg_ptr,t)}solver_contact_tangent_velocity(t){const r=i.rawcontactmanifold_solver_contact_tangent_velocity(this.__wbg_ptr,t);return w.__wrap(r)}}class Kt{static __wrap(t){t=t>>>0;const r=Object.create(Kt.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawcontactpair_free(t)}collider1(){return i.rawcontactpair_collider1(this.__wbg_ptr)}collider2(){return i.rawcontactpair_collider2(this.__wbg_ptr)}numContactManifolds(){return i.rawcontactpair_numContactManifolds(this.__wbg_ptr)>>>0}contactManifold(t){const r=i.rawcontactpair_contactManifold(this.__wbg_ptr,t);return r===0?void 0:Vt.__wrap(r)}}class ee{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawdebugrenderpipeline_free(t)}constructor(){const t=i.rawdebugrenderpipeline_new();return this.__wbg_ptr=t>>>0,this}vertices(){const t=i.rawdebugrenderpipeline_vertices(this.__wbg_ptr);return Ht(t)}colors(){const t=i.rawdebugrenderpipeline_colors(this.__wbg_ptr);return Ht(t)}render(t,r,e,n,s){_(t,A),_(r,P),_(e,W),_(n,U),_(s,V),i.rawdebugrenderpipeline_render(this.__wbg_ptr,t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr,n.__wbg_ptr,s.__wbg_ptr)}}class Yt{static __wrap(t){t=t>>>0;const r=Object.create(Yt.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawdeserializedworld_free(t)}takeGravity(){const t=i.rawdeserializedworld_takeGravity(this.__wbg_ptr);return t===0?void 0:w.__wrap(t)}takeIntegrationParameters(){const t=i.rawdeserializedworld_takeIntegrationParameters(this.__wbg_ptr);return t===0?void 0:tt.__wrap(t)}takeIslandManager(){const t=i.rawdeserializedworld_takeIslandManager(this.__wbg_ptr);return t===0?void 0:B.__wrap(t)}takeBroadPhase(){const t=i.rawdeserializedworld_takeBroadPhase(this.__wbg_ptr);return t===0?void 0:Q.__wrap(t)}takeNarrowPhase(){const t=i.rawdeserializedworld_takeNarrowPhase(this.__wbg_ptr);return t===0?void 0:V.__wrap(t)}takeBodies(){const t=i.rawdeserializedworld_takeBodies(this.__wbg_ptr);return t===0?void 0:A.__wrap(t)}takeColliders(){const t=i.rawdeserializedworld_takeColliders(this.__wbg_ptr);return t===0?void 0:P.__wrap(t)}takeImpulseJoints(){const t=i.rawdeserializedworld_takeImpulseJoints(this.__wbg_ptr);return t===0?void 0:W.__wrap(t)}takeMultibodyJoints(){const t=i.rawdeserializedworld_takeMultibodyJoints(this.__wbg_ptr);return t===0?void 0:U.__wrap(t)}}class fr{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_raweventqueue_free(t)}constructor(t){const r=i.raweventqueue_new(t);return this.__wbg_ptr=r>>>0,this}drainCollisionEvents(t){try{i.raweventqueue_drainCollisionEvents(this.__wbg_ptr,I(t))}finally{S[v++]=void 0}}drainContactForceEvents(t){try{i.raweventqueue_drainContactForceEvents(this.__wbg_ptr,I(t))}finally{S[v++]=void 0}}clear(){i.raweventqueue_clear(this.__wbg_ptr)}}class N{static __wrap(t){t=t>>>0;const r=Object.create(N.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawgenericjoint_free(t)}static spring(t,r,e,n,s){_(n,w),_(s,w);const o=i.rawgenericjoint_spring(t,r,e,n.__wbg_ptr,s.__wbg_ptr);return N.__wrap(o)}static rope(t,r,e){_(r,w),_(e,w);const n=i.rawgenericjoint_rope(t,r.__wbg_ptr,e.__wbg_ptr);return N.__wrap(n)}static prismatic(t,r,e,n,s,o){_(t,w),_(r,w),_(e,w);const l=i.rawgenericjoint_prismatic(t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr,n,s,o);return l===0?void 0:N.__wrap(l)}static fixed(t,r,e,n){_(t,w),_(r,y),_(e,w),_(n,y);const s=i.rawgenericjoint_fixed(t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr,n.__wbg_ptr);return N.__wrap(s)}static revolute(t,r){_(t,w),_(r,w);const e=i.rawgenericjoint_revolute(t.__wbg_ptr,r.__wbg_ptr);return e===0?void 0:N.__wrap(e)}}class W{static __wrap(t){t=t>>>0;const r=Object.create(W.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawimpulsejointset_free(t)}jointType(t){return i.rawimpulsejointset_jointType(this.__wbg_ptr,t)}jointBodyHandle1(t){return i.rawimpulsejointset_jointBodyHandle1(this.__wbg_ptr,t)}jointBodyHandle2(t){return i.rawimpulsejointset_jointBodyHandle2(this.__wbg_ptr,t)}jointFrameX1(t){const r=i.rawimpulsejointset_jointFrameX1(this.__wbg_ptr,t);return y.__wrap(r)}jointFrameX2(t){const r=i.rawimpulsejointset_jointFrameX2(this.__wbg_ptr,t);return y.__wrap(r)}jointAnchor1(t){const r=i.rawimpulsejointset_jointAnchor1(this.__wbg_ptr,t);return w.__wrap(r)}jointAnchor2(t){const r=i.rawimpulsejointset_jointAnchor2(this.__wbg_ptr,t);return w.__wrap(r)}jointSetAnchor1(t,r){_(r,w),i.rawimpulsejointset_jointSetAnchor1(this.__wbg_ptr,t,r.__wbg_ptr)}jointSetAnchor2(t,r){_(r,w),i.rawimpulsejointset_jointSetAnchor2(this.__wbg_ptr,t,r.__wbg_ptr)}jointContactsEnabled(t){return i.rawimpulsejointset_jointContactsEnabled(this.__wbg_ptr,t)!==0}jointSetContactsEnabled(t,r){i.rawimpulsejointset_jointSetContactsEnabled(this.__wbg_ptr,t,r)}jointLimitsEnabled(t,r){return i.rawimpulsejointset_jointLimitsEnabled(this.__wbg_ptr,t,r)!==0}jointLimitsMin(t,r){return i.rawimpulsejointset_jointLimitsMin(this.__wbg_ptr,t,r)}jointLimitsMax(t,r){return i.rawimpulsejointset_jointLimitsMax(this.__wbg_ptr,t,r)}jointSetLimits(t,r,e,n){i.rawimpulsejointset_jointSetLimits(this.__wbg_ptr,t,r,e,n)}jointConfigureMotorModel(t,r,e){i.rawimpulsejointset_jointConfigureMotorModel(this.__wbg_ptr,t,r,e)}jointConfigureMotorVelocity(t,r,e,n){i.rawimpulsejointset_jointConfigureMotorVelocity(this.__wbg_ptr,t,r,e,n)}jointConfigureMotorPosition(t,r,e,n,s){i.rawimpulsejointset_jointConfigureMotorPosition(this.__wbg_ptr,t,r,e,n,s)}jointConfigureMotor(t,r,e,n,s,o){i.rawimpulsejointset_jointConfigureMotor(this.__wbg_ptr,t,r,e,n,s,o)}constructor(){const t=i.rawimpulsejointset_new();return this.__wbg_ptr=t>>>0,this}createJoint(t,r,e,n){return _(t,N),i.rawimpulsejointset_createJoint(this.__wbg_ptr,t.__wbg_ptr,r,e,n)}remove(t,r){i.rawimpulsejointset_remove(this.__wbg_ptr,t,r)}len(){return i.rawimpulsejointset_len(this.__wbg_ptr)>>>0}contains(t){return i.rawimpulsejointset_contains(this.__wbg_ptr,t)!==0}forEachJointHandle(t){try{i.rawimpulsejointset_forEachJointHandle(this.__wbg_ptr,I(t))}finally{S[v++]=void 0}}forEachJointAttachedToRigidBody(t,r){try{i.rawimpulsejointset_forEachJointAttachedToRigidBody(this.__wbg_ptr,t,I(r))}finally{S[v++]=void 0}}}class tt{static __wrap(t){t=t>>>0;const r=Object.create(tt.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawintegrationparameters_free(t)}constructor(){const t=i.rawintegrationparameters_new();return this.__wbg_ptr=t>>>0,this}get dt(){return i.rawintegrationparameters_dt(this.__wbg_ptr)}get erp(){return i.rawintegrationparameters_erp(this.__wbg_ptr)}get normalizedAllowedLinearError(){return i.rawcontactforceevent_max_force_magnitude(this.__wbg_ptr)}get normalizedPredictionDistance(){return i.rawintegrationparameters_normalizedPredictionDistance(this.__wbg_ptr)}get numSolverIterations(){return i.rawintegrationparameters_numSolverIterations(this.__wbg_ptr)>>>0}get numAdditionalFrictionIterations(){return i.rawintegrationparameters_numAdditionalFrictionIterations(this.__wbg_ptr)>>>0}get numInternalPgsIterations(){return i.rawintegrationparameters_numInternalPgsIterations(this.__wbg_ptr)>>>0}get minIslandSize(){return i.rawimpulsejointset_len(this.__wbg_ptr)>>>0}get maxCcdSubsteps(){return i.rawintegrationparameters_maxCcdSubsteps(this.__wbg_ptr)>>>0}get lengthUnit(){return i.rawcontactforceevent_total_force_magnitude(this.__wbg_ptr)}set dt(t){i.rawintegrationparameters_set_dt(this.__wbg_ptr,t)}set erp(t){i.rawintegrationparameters_set_erp(this.__wbg_ptr,t)}set normalizedAllowedLinearError(t){i.rawintegrationparameters_set_normalizedAllowedLinearError(this.__wbg_ptr,t)}set normalizedPredictionDistance(t){i.rawintegrationparameters_set_normalizedPredictionDistance(this.__wbg_ptr,t)}set numSolverIterations(t){i.rawintegrationparameters_set_numSolverIterations(this.__wbg_ptr,t)}set numAdditionalFrictionIterations(t){i.rawintegrationparameters_set_numAdditionalFrictionIterations(this.__wbg_ptr,t)}set numInternalPgsIterations(t){i.rawintegrationparameters_set_numInternalPgsIterations(this.__wbg_ptr,t)}set minIslandSize(t){i.rawintegrationparameters_set_minIslandSize(this.__wbg_ptr,t)}set maxCcdSubsteps(t){i.rawintegrationparameters_set_maxCcdSubsteps(this.__wbg_ptr,t)}set lengthUnit(t){i.rawintegrationparameters_set_lengthUnit(this.__wbg_ptr,t)}switchToStandardPgsSolver(){i.rawintegrationparameters_switchToStandardPgsSolver(this.__wbg_ptr)}switchToSmallStepsPgsSolver(){i.rawintegrationparameters_switchToSmallStepsPgsSolver(this.__wbg_ptr)}switchToSmallStepsPgsSolverWithoutWarmstart(){i.rawintegrationparameters_switchToSmallStepsPgsSolverWithoutWarmstart(this.__wbg_ptr)}}class B{static __wrap(t){t=t>>>0;const r=Object.create(B.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawislandmanager_free(t)}constructor(){const t=i.rawislandmanager_new();return this.__wbg_ptr=t>>>0,this}forEachActiveRigidBodyHandle(t){try{i.rawislandmanager_forEachActiveRigidBodyHandle(this.__wbg_ptr,I(t))}finally{S[v++]=void 0}}}class ie{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawkinematiccharactercontroller_free(t)}constructor(t){const r=i.rawkinematiccharactercontroller_new(t);return this.__wbg_ptr=r>>>0,this}up(){const t=i.rawcollidershapecasthit_normal2(this.__wbg_ptr);return w.__wrap(t)}setUp(t){_(t,w),i.rawkinematiccharactercontroller_setUp(this.__wbg_ptr,t.__wbg_ptr)}normalNudgeFactor(){return i.rawkinematiccharactercontroller_normalNudgeFactor(this.__wbg_ptr)}setNormalNudgeFactor(t){i.rawkinematiccharactercontroller_setNormalNudgeFactor(this.__wbg_ptr,t)}offset(){return i.rawintegrationparameters_dt(this.__wbg_ptr)}setOffset(t){i.rawkinematiccharactercontroller_setOffset(this.__wbg_ptr,t)}slideEnabled(){return i.rawkinematiccharactercontroller_slideEnabled(this.__wbg_ptr)!==0}setSlideEnabled(t){i.rawkinematiccharactercontroller_setSlideEnabled(this.__wbg_ptr,t)}autostepMaxHeight(){try{const e=i.__wbindgen_add_to_stack_pointer(-16);i.rawkinematiccharactercontroller_autostepMaxHeight(e,this.__wbg_ptr);var t=C()[e/4+0],r=J()[e/4+1];return t===0?void 0:r}finally{i.__wbindgen_add_to_stack_pointer(16)}}autostepMinWidth(){try{const e=i.__wbindgen_add_to_stack_pointer(-16);i.rawkinematiccharactercontroller_autostepMinWidth(e,this.__wbg_ptr);var t=C()[e/4+0],r=J()[e/4+1];return t===0?void 0:r}finally{i.__wbindgen_add_to_stack_pointer(16)}}autostepIncludesDynamicBodies(){const t=i.rawkinematiccharactercontroller_autostepIncludesDynamicBodies(this.__wbg_ptr);return t===16777215?void 0:t!==0}autostepEnabled(){return i.rawkinematiccharactercontroller_autostepEnabled(this.__wbg_ptr)!==0}enableAutostep(t,r,e){i.rawkinematiccharactercontroller_enableAutostep(this.__wbg_ptr,t,r,e)}disableAutostep(){i.rawkinematiccharactercontroller_disableAutostep(this.__wbg_ptr)}maxSlopeClimbAngle(){return i.rawintegrationparameters_normalizedPredictionDistance(this.__wbg_ptr)}setMaxSlopeClimbAngle(t){i.rawintegrationparameters_set_normalizedPredictionDistance(this.__wbg_ptr,t)}minSlopeSlideAngle(){return i.rawkinematiccharactercontroller_minSlopeSlideAngle(this.__wbg_ptr)}setMinSlopeSlideAngle(t){i.rawkinematiccharactercontroller_setMinSlopeSlideAngle(this.__wbg_ptr,t)}snapToGroundDistance(){try{const e=i.__wbindgen_add_to_stack_pointer(-16);i.rawkinematiccharactercontroller_snapToGroundDistance(e,this.__wbg_ptr);var t=C()[e/4+0],r=J()[e/4+1];return t===0?void 0:r}finally{i.__wbindgen_add_to_stack_pointer(16)}}enableSnapToGround(t){i.rawkinematiccharactercontroller_enableSnapToGround(this.__wbg_ptr,t)}disableSnapToGround(){i.rawkinematiccharactercontroller_disableSnapToGround(this.__wbg_ptr)}snapToGroundEnabled(){return i.rawkinematiccharactercontroller_snapToGroundEnabled(this.__wbg_ptr)!==0}computeColliderMovement(t,r,e,n,s,o,l,h,d,p,u){try{_(r,A),_(e,P),_(n,Sr),_(o,w),i.rawkinematiccharactercontroller_computeColliderMovement(this.__wbg_ptr,t,r.__wbg_ptr,e.__wbg_ptr,n.__wbg_ptr,s,o.__wbg_ptr,l,!g(h),g(h)?0:h,d,!g(p),g(p)?0:p,I(u))}finally{S[v++]=void 0}}computedMovement(){const t=i.rawkinematiccharactercontroller_computedMovement(this.__wbg_ptr);return w.__wrap(t)}computedGrounded(){return i.rawkinematiccharactercontroller_computedGrounded(this.__wbg_ptr)!==0}numComputedCollisions(){return i.rawkinematiccharactercontroller_numComputedCollisions(this.__wbg_ptr)>>>0}computedCollision(t,r){return _(r,mr),i.rawkinematiccharactercontroller_computedCollision(this.__wbg_ptr,t,r.__wbg_ptr)!==0}}class U{static __wrap(t){t=t>>>0;const r=Object.create(U.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawmultibodyjointset_free(t)}jointType(t){return i.rawmultibodyjointset_jointType(this.__wbg_ptr,t)}jointFrameX1(t){const r=i.rawmultibodyjointset_jointFrameX1(this.__wbg_ptr,t);return y.__wrap(r)}jointFrameX2(t){const r=i.rawmultibodyjointset_jointFrameX2(this.__wbg_ptr,t);return y.__wrap(r)}jointAnchor1(t){const r=i.rawmultibodyjointset_jointAnchor1(this.__wbg_ptr,t);return w.__wrap(r)}jointAnchor2(t){const r=i.rawmultibodyjointset_jointAnchor2(this.__wbg_ptr,t);return w.__wrap(r)}jointContactsEnabled(t){return i.rawmultibodyjointset_jointContactsEnabled(this.__wbg_ptr,t)!==0}jointSetContactsEnabled(t,r){i.rawmultibodyjointset_jointSetContactsEnabled(this.__wbg_ptr,t,r)}jointLimitsEnabled(t,r){return i.rawmultibodyjointset_jointLimitsEnabled(this.__wbg_ptr,t,r)!==0}jointLimitsMin(t,r){return i.rawmultibodyjointset_jointLimitsMin(this.__wbg_ptr,t,r)}jointLimitsMax(t,r){return i.rawmultibodyjointset_jointLimitsMax(this.__wbg_ptr,t,r)}constructor(){const t=i.rawmultibodyjointset_new();return this.__wbg_ptr=t>>>0,this}createJoint(t,r,e,n){return _(t,N),i.rawmultibodyjointset_createJoint(this.__wbg_ptr,t.__wbg_ptr,r,e,n)}remove(t,r){i.rawmultibodyjointset_remove(this.__wbg_ptr,t,r)}contains(t){return i.rawmultibodyjointset_contains(this.__wbg_ptr,t)!==0}forEachJointHandle(t){try{i.rawmultibodyjointset_forEachJointHandle(this.__wbg_ptr,I(t))}finally{S[v++]=void 0}}forEachJointAttachedToRigidBody(t,r){try{i.rawmultibodyjointset_forEachJointAttachedToRigidBody(this.__wbg_ptr,t,I(r))}finally{S[v++]=void 0}}}class V{static __wrap(t){t=t>>>0;const r=Object.create(V.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawnarrowphase_free(t)}constructor(){const t=i.rawnarrowphase_new();return this.__wbg_ptr=t>>>0,this}contact_pairs_with(t,r){i.rawnarrowphase_contact_pairs_with(this.__wbg_ptr,t,et(r))}contact_pair(t,r){const e=i.rawnarrowphase_contact_pair(this.__wbg_ptr,t,r);return e===0?void 0:Kt.__wrap(e)}intersection_pairs_with(t,r){i.rawnarrowphase_intersection_pairs_with(this.__wbg_ptr,t,et(r))}intersection_pair(t,r){return i.rawnarrowphase_intersection_pair(this.__wbg_ptr,t,r)!==0}}class ne{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawphysicspipeline_free(t)}constructor(){const t=i.rawphysicspipeline_new();return this.__wbg_ptr=t>>>0,this}step(t,r,e,n,s,o,l,h,d,p){_(t,w),_(r,tt),_(e,B),_(n,Q),_(s,V),_(o,A),_(l,P),_(h,W),_(d,U),_(p,Gt),i.rawphysicspipeline_step(this.__wbg_ptr,t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr,n.__wbg_ptr,s.__wbg_ptr,o.__wbg_ptr,l.__wbg_ptr,h.__wbg_ptr,d.__wbg_ptr,p.__wbg_ptr)}stepWithEvents(t,r,e,n,s,o,l,h,d,p,u,b,m,E){_(t,w),_(r,tt),_(e,B),_(n,Q),_(s,V),_(o,A),_(l,P),_(h,W),_(d,U),_(p,Gt),_(u,fr),i.rawphysicspipeline_stepWithEvents(this.__wbg_ptr,t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr,n.__wbg_ptr,s.__wbg_ptr,o.__wbg_ptr,l.__wbg_ptr,h.__wbg_ptr,d.__wbg_ptr,p.__wbg_ptr,u.__wbg_ptr,et(b),et(m),et(E))}}class ft{static __wrap(t){t=t>>>0;const r=Object.create(ft.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawpointcolliderprojection_free(t)}colliderHandle(){return i.rawpointcolliderprojection_colliderHandle(this.__wbg_ptr)}point(){const t=i.rawpointcolliderprojection_point(this.__wbg_ptr);return w.__wrap(t)}isInside(){return i.rawpointcolliderprojection_isInside(this.__wbg_ptr)!==0}featureType(){return i.rawpointcolliderprojection_featureType(this.__wbg_ptr)}featureId(){try{const e=i.__wbindgen_add_to_stack_pointer(-16);i.rawpointcolliderprojection_featureId(e,this.__wbg_ptr);var t=C()[e/4+0],r=C()[e/4+1];return t===0?void 0:r>>>0}finally{i.__wbindgen_add_to_stack_pointer(16)}}}class Pt{static __wrap(t){t=t>>>0;const r=Object.create(Pt.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawpointprojection_free(t)}point(){const t=i.rawpointprojection_point(this.__wbg_ptr);return w.__wrap(t)}isInside(){return i.rawpointprojection_isInside(this.__wbg_ptr)!==0}}class Sr{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawquerypipeline_free(t)}constructor(){const t=i.rawquerypipeline_new();return this.__wbg_ptr=t>>>0,this}update(t,r){_(t,A),_(r,P),i.rawquerypipeline_update(this.__wbg_ptr,t.__wbg_ptr,r.__wbg_ptr)}castRay(t,r,e,n,s,o,l,h,d,p,u){try{_(t,A),_(r,P),_(e,w),_(n,w);const b=i.rawquerypipeline_castRay(this.__wbg_ptr,t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr,n.__wbg_ptr,s,o,l,!g(h),g(h)?0:h,!g(d),g(d)?0:d,!g(p),g(p)?0:p,I(u));return b===0?void 0:Zt.__wrap(b)}finally{S[v++]=void 0}}castRayAndGetNormal(t,r,e,n,s,o,l,h,d,p,u){try{_(t,A),_(r,P),_(e,w),_(n,w);const b=i.rawquerypipeline_castRayAndGetNormal(this.__wbg_ptr,t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr,n.__wbg_ptr,s,o,l,!g(h),g(h)?0:h,!g(d),g(d)?0:d,!g(p),g(p)?0:p,I(u));return b===0?void 0:$t.__wrap(b)}finally{S[v++]=void 0}}intersectionsWithRay(t,r,e,n,s,o,l,h,d,p,u,b){try{_(t,A),_(r,P),_(e,w),_(n,w),i.rawquerypipeline_intersectionsWithRay(this.__wbg_ptr,t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr,n.__wbg_ptr,s,o,I(l),h,!g(d),g(d)?0:d,!g(p),g(p)?0:p,!g(u),g(u)?0:u,I(b))}finally{S[v++]=void 0,S[v++]=void 0}}intersectionWithShape(t,r,e,n,s,o,l,h,d,p){try{const m=i.__wbindgen_add_to_stack_pointer(-16);_(t,A),_(r,P),_(e,w),_(n,y),_(s,f),i.rawquerypipeline_intersectionWithShape(m,this.__wbg_ptr,t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr,n.__wbg_ptr,s.__wbg_ptr,o,!g(l),g(l)?0:l,!g(h),g(h)?0:h,!g(d),g(d)?0:d,I(p));var u=C()[m/4+0],b=Lt()[m/8+1];return u===0?void 0:b}finally{i.__wbindgen_add_to_stack_pointer(16),S[v++]=void 0}}projectPoint(t,r,e,n,s,o,l,h,d){try{_(t,A),_(r,P),_(e,w);const p=i.rawquerypipeline_projectPoint(this.__wbg_ptr,t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr,n,s,!g(o),g(o)?0:o,!g(l),g(l)?0:l,!g(h),g(h)?0:h,I(d));return p===0?void 0:ft.__wrap(p)}finally{S[v++]=void 0}}projectPointAndGetFeature(t,r,e,n,s,o,l,h){try{_(t,A),_(r,P),_(e,w);const d=i.rawquerypipeline_projectPointAndGetFeature(this.__wbg_ptr,t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr,n,!g(s),g(s)?0:s,!g(o),g(o)?0:o,!g(l),g(l)?0:l,I(h));return d===0?void 0:ft.__wrap(d)}finally{S[v++]=void 0}}intersectionsWithPoint(t,r,e,n,s,o,l,h,d){try{_(t,A),_(r,P),_(e,w),i.rawquerypipeline_intersectionsWithPoint(this.__wbg_ptr,t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr,I(n),s,!g(o),g(o)?0:o,!g(l),g(l)?0:l,!g(h),g(h)?0:h,I(d))}finally{S[v++]=void 0,S[v++]=void 0}}castShape(t,r,e,n,s,o,l,h,d,p,u,b,m,E){try{_(t,A),_(r,P),_(e,w),_(n,y),_(s,w),_(o,f);const D=i.rawquerypipeline_castShape(this.__wbg_ptr,t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr,n.__wbg_ptr,s.__wbg_ptr,o.__wbg_ptr,l,h,d,p,!g(u),g(u)?0:u,!g(b),g(b)?0:b,!g(m),g(m)?0:m,I(E));return D===0?void 0:It.__wrap(D)}finally{S[v++]=void 0}}intersectionsWithShape(t,r,e,n,s,o,l,h,d,p,u){try{_(t,A),_(r,P),_(e,w),_(n,y),_(s,f),i.rawquerypipeline_intersectionsWithShape(this.__wbg_ptr,t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr,n.__wbg_ptr,s.__wbg_ptr,I(o),l,!g(h),g(h)?0:h,!g(d),g(d)?0:d,!g(p),g(p)?0:p,I(u))}finally{S[v++]=void 0,S[v++]=void 0}}collidersWithAabbIntersectingAabb(t,r,e){try{_(t,w),_(r,w),i.rawquerypipeline_collidersWithAabbIntersectingAabb(this.__wbg_ptr,t.__wbg_ptr,r.__wbg_ptr,I(e))}finally{S[v++]=void 0}}}class Zt{static __wrap(t){t=t>>>0;const r=Object.create(Zt.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawraycolliderhit_free(t)}colliderHandle(){return i.rawcollidershapecasthit_colliderHandle(this.__wbg_ptr)}timeOfImpact(){return i.rawcollidershapecasthit_time_of_impact(this.__wbg_ptr)}}class $t{static __wrap(t){t=t>>>0;const r=Object.create($t.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawraycolliderintersection_free(t)}colliderHandle(){return i.rawpointcolliderprojection_colliderHandle(this.__wbg_ptr)}normal(){const t=i.rawcollidershapecasthit_witness1(this.__wbg_ptr);return w.__wrap(t)}time_of_impact(){return i.rawcollidershapecasthit_time_of_impact(this.__wbg_ptr)}featureType(){return i.rawpointcolliderprojection_featureType(this.__wbg_ptr)}featureId(){try{const e=i.__wbindgen_add_to_stack_pointer(-16);i.rawpointcolliderprojection_featureId(e,this.__wbg_ptr);var t=C()[e/4+0],r=C()[e/4+1];return t===0?void 0:r>>>0}finally{i.__wbindgen_add_to_stack_pointer(16)}}}class At{static __wrap(t){t=t>>>0;const r=Object.create(At.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawrayintersection_free(t)}normal(){const t=i.rawcollidershapecasthit_witness1(this.__wbg_ptr);return w.__wrap(t)}time_of_impact(){return i.rawcollidershapecasthit_time_of_impact(this.__wbg_ptr)}featureType(){return i.rawpointcolliderprojection_featureType(this.__wbg_ptr)}featureId(){try{const e=i.__wbindgen_add_to_stack_pointer(-16);i.rawpointcolliderprojection_featureId(e,this.__wbg_ptr);var t=C()[e/4+0],r=C()[e/4+1];return t===0?void 0:r>>>0}finally{i.__wbindgen_add_to_stack_pointer(16)}}}class A{static __wrap(t){t=t>>>0;const r=Object.create(A.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawrigidbodyset_free(t)}rbTranslation(t){const r=i.rawrigidbodyset_rbTranslation(this.__wbg_ptr,t);return w.__wrap(r)}rbRotation(t){const r=i.rawrigidbodyset_rbRotation(this.__wbg_ptr,t);return y.__wrap(r)}rbSleep(t){i.rawrigidbodyset_rbSleep(this.__wbg_ptr,t)}rbIsSleeping(t){return i.rawrigidbodyset_rbIsSleeping(this.__wbg_ptr,t)!==0}rbIsMoving(t){return i.rawrigidbodyset_rbIsMoving(this.__wbg_ptr,t)!==0}rbNextTranslation(t){const r=i.rawrigidbodyset_rbNextTranslation(this.__wbg_ptr,t);return w.__wrap(r)}rbNextRotation(t){const r=i.rawrigidbodyset_rbNextRotation(this.__wbg_ptr,t);return y.__wrap(r)}rbSetTranslation(t,r,e,n){i.rawrigidbodyset_rbSetTranslation(this.__wbg_ptr,t,r,e,n)}rbSetRotation(t,r,e){i.rawrigidbodyset_rbSetRotation(this.__wbg_ptr,t,r,e)}rbSetLinvel(t,r,e){_(r,w),i.rawrigidbodyset_rbSetLinvel(this.__wbg_ptr,t,r.__wbg_ptr,e)}rbSetAngvel(t,r,e){i.rawrigidbodyset_rbSetAngvel(this.__wbg_ptr,t,r,e)}rbSetNextKinematicTranslation(t,r,e){i.rawrigidbodyset_rbSetNextKinematicTranslation(this.__wbg_ptr,t,r,e)}rbSetNextKinematicRotation(t,r){i.rawrigidbodyset_rbSetNextKinematicRotation(this.__wbg_ptr,t,r)}rbRecomputeMassPropertiesFromColliders(t,r){_(r,P),i.rawrigidbodyset_rbRecomputeMassPropertiesFromColliders(this.__wbg_ptr,t,r.__wbg_ptr)}rbSetAdditionalMass(t,r,e){i.rawrigidbodyset_rbSetAdditionalMass(this.__wbg_ptr,t,r,e)}rbSetAdditionalMassProperties(t,r,e,n,s){_(e,w),i.rawrigidbodyset_rbSetAdditionalMassProperties(this.__wbg_ptr,t,r,e.__wbg_ptr,n,s)}rbLinvel(t){const r=i.rawrigidbodyset_rbLinvel(this.__wbg_ptr,t);return w.__wrap(r)}rbAngvel(t){return i.rawrigidbodyset_rbAngvel(this.__wbg_ptr,t)}rbLockTranslations(t,r,e){i.rawrigidbodyset_rbLockTranslations(this.__wbg_ptr,t,r,e)}rbSetEnabledTranslations(t,r,e,n){i.rawrigidbodyset_rbSetEnabledTranslations(this.__wbg_ptr,t,r,e,n)}rbLockRotations(t,r,e){i.rawrigidbodyset_rbLockRotations(this.__wbg_ptr,t,r,e)}rbDominanceGroup(t){return i.rawrigidbodyset_rbDominanceGroup(this.__wbg_ptr,t)}rbSetDominanceGroup(t,r){i.rawrigidbodyset_rbSetDominanceGroup(this.__wbg_ptr,t,r)}rbEnableCcd(t,r){i.rawrigidbodyset_rbEnableCcd(this.__wbg_ptr,t,r)}rbSetSoftCcdPrediction(t,r){i.rawrigidbodyset_rbSetSoftCcdPrediction(this.__wbg_ptr,t,r)}rbMass(t){return i.rawrigidbodyset_rbMass(this.__wbg_ptr,t)}rbInvMass(t){return i.rawrigidbodyset_rbInvMass(this.__wbg_ptr,t)}rbEffectiveInvMass(t){const r=i.rawrigidbodyset_rbEffectiveInvMass(this.__wbg_ptr,t);return w.__wrap(r)}rbLocalCom(t){const r=i.rawrigidbodyset_rbLocalCom(this.__wbg_ptr,t);return w.__wrap(r)}rbWorldCom(t){const r=i.rawrigidbodyset_rbWorldCom(this.__wbg_ptr,t);return w.__wrap(r)}rbInvPrincipalInertiaSqrt(t){return i.rawrigidbodyset_rbInvPrincipalInertiaSqrt(this.__wbg_ptr,t)}rbPrincipalInertia(t){return i.rawrigidbodyset_rbPrincipalInertia(this.__wbg_ptr,t)}rbEffectiveWorldInvInertiaSqrt(t){return i.rawrigidbodyset_rbEffectiveWorldInvInertiaSqrt(this.__wbg_ptr,t)}rbEffectiveAngularInertia(t){return i.rawrigidbodyset_rbEffectiveAngularInertia(this.__wbg_ptr,t)}rbWakeUp(t){i.rawrigidbodyset_rbWakeUp(this.__wbg_ptr,t)}rbIsCcdEnabled(t){return i.rawrigidbodyset_rbIsCcdEnabled(this.__wbg_ptr,t)!==0}rbSoftCcdPrediction(t){return i.rawrigidbodyset_rbSoftCcdPrediction(this.__wbg_ptr,t)}rbNumColliders(t){return i.rawrigidbodyset_rbNumColliders(this.__wbg_ptr,t)>>>0}rbCollider(t,r){return i.rawrigidbodyset_rbCollider(this.__wbg_ptr,t,r)}rbBodyType(t){return i.rawrigidbodyset_rbBodyType(this.__wbg_ptr,t)}rbSetBodyType(t,r,e){i.rawrigidbodyset_rbSetBodyType(this.__wbg_ptr,t,r,e)}rbIsFixed(t){return i.rawrigidbodyset_rbIsFixed(this.__wbg_ptr,t)!==0}rbIsKinematic(t){return i.rawrigidbodyset_rbIsKinematic(this.__wbg_ptr,t)!==0}rbIsDynamic(t){return i.rawrigidbodyset_rbIsDynamic(this.__wbg_ptr,t)!==0}rbLinearDamping(t){return i.rawrigidbodyset_rbLinearDamping(this.__wbg_ptr,t)}rbAngularDamping(t){return i.rawrigidbodyset_rbAngularDamping(this.__wbg_ptr,t)}rbSetLinearDamping(t,r){i.rawrigidbodyset_rbSetLinearDamping(this.__wbg_ptr,t,r)}rbSetAngularDamping(t,r){i.rawrigidbodyset_rbSetAngularDamping(this.__wbg_ptr,t,r)}rbSetEnabled(t,r){i.rawrigidbodyset_rbSetEnabled(this.__wbg_ptr,t,r)}rbIsEnabled(t){return i.rawrigidbodyset_rbIsEnabled(this.__wbg_ptr,t)!==0}rbGravityScale(t){return i.rawrigidbodyset_rbGravityScale(this.__wbg_ptr,t)}rbSetGravityScale(t,r,e){i.rawrigidbodyset_rbSetGravityScale(this.__wbg_ptr,t,r,e)}rbResetForces(t,r){i.rawrigidbodyset_rbResetForces(this.__wbg_ptr,t,r)}rbResetTorques(t,r){i.rawrigidbodyset_rbResetTorques(this.__wbg_ptr,t,r)}rbAddForce(t,r,e){_(r,w),i.rawrigidbodyset_rbAddForce(this.__wbg_ptr,t,r.__wbg_ptr,e)}rbApplyImpulse(t,r,e){_(r,w),i.rawrigidbodyset_rbApplyImpulse(this.__wbg_ptr,t,r.__wbg_ptr,e)}rbAddTorque(t,r,e){i.rawrigidbodyset_rbAddTorque(this.__wbg_ptr,t,r,e)}rbApplyTorqueImpulse(t,r,e){i.rawrigidbodyset_rbApplyTorqueImpulse(this.__wbg_ptr,t,r,e)}rbAddForceAtPoint(t,r,e,n){_(r,w),_(e,w),i.rawrigidbodyset_rbAddForceAtPoint(this.__wbg_ptr,t,r.__wbg_ptr,e.__wbg_ptr,n)}rbApplyImpulseAtPoint(t,r,e,n){_(r,w),_(e,w),i.rawrigidbodyset_rbApplyImpulseAtPoint(this.__wbg_ptr,t,r.__wbg_ptr,e.__wbg_ptr,n)}rbAdditionalSolverIterations(t){return i.rawrigidbodyset_rbAdditionalSolverIterations(this.__wbg_ptr,t)>>>0}rbSetAdditionalSolverIterations(t,r){i.rawrigidbodyset_rbSetAdditionalSolverIterations(this.__wbg_ptr,t,r)}rbUserData(t){return i.rawrigidbodyset_rbUserData(this.__wbg_ptr,t)>>>0}rbSetUserData(t,r){i.rawrigidbodyset_rbSetUserData(this.__wbg_ptr,t,r)}constructor(){const t=i.rawrigidbodyset_new();return this.__wbg_ptr=t>>>0,this}createRigidBody(t,r,e,n,s,o,l,h,d,p,u,b,m,E,D,G,z,O,K,Nt,kt,xt){return _(r,w),_(e,y),_(l,w),_(h,w),i.rawrigidbodyset_createRigidBody(this.__wbg_ptr,t,r.__wbg_ptr,e.__wbg_ptr,n,s,o,l.__wbg_ptr,h.__wbg_ptr,d,p,u,b,m,E,D,G,z,O,K,Nt,kt,xt)}remove(t,r,e,n,s){_(r,B),_(e,P),_(n,W),_(s,U),i.rawrigidbodyset_remove(this.__wbg_ptr,t,r.__wbg_ptr,e.__wbg_ptr,n.__wbg_ptr,s.__wbg_ptr)}len(){return i.rawcolliderset_len(this.__wbg_ptr)>>>0}contains(t){return i.rawrigidbodyset_contains(this.__wbg_ptr,t)!==0}forEachRigidBodyHandle(t){try{i.rawrigidbodyset_forEachRigidBodyHandle(this.__wbg_ptr,I(t))}finally{S[v++]=void 0}}propagateModifiedBodyPositionsToColliders(t){_(t,P),i.rawrigidbodyset_propagateModifiedBodyPositionsToColliders(this.__wbg_ptr,t.__wbg_ptr)}}class y{static __wrap(t){t=t>>>0;const r=Object.create(y.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawrotation_free(t)}static identity(){const t=i.rawrotation_identity();return y.__wrap(t)}static fromAngle(t){const r=i.rawrotation_fromAngle(t);return y.__wrap(r)}get im(){return i.rawintegrationparameters_dt(this.__wbg_ptr)}get re(){return i.rawrotation_re(this.__wbg_ptr)}get angle(){return i.rawrotation_angle(this.__wbg_ptr)}}class se{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawserializationpipeline_free(t)}constructor(){const t=i.rawserializationpipeline_new();return this.__wbg_ptr=t>>>0,this}serializeAll(t,r,e,n,s,o,l,h,d){_(t,w),_(r,tt),_(e,B),_(n,Q),_(s,V),_(o,A),_(l,P),_(h,W),_(d,U);const p=i.rawserializationpipeline_serializeAll(this.__wbg_ptr,t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr,n.__wbg_ptr,s.__wbg_ptr,o.__wbg_ptr,l.__wbg_ptr,h.__wbg_ptr,d.__wbg_ptr);return Ht(p)}deserializeAll(t){const r=i.rawserializationpipeline_deserializeAll(this.__wbg_ptr,et(t));return r===0?void 0:Yt.__wrap(r)}}class f{static __wrap(t){t=t>>>0;const r=Object.create(f.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawshape_free(t)}static cuboid(t,r){const e=i.rawshape_cuboid(t,r);return f.__wrap(e)}static roundCuboid(t,r,e){const n=i.rawshape_roundCuboid(t,r,e);return f.__wrap(n)}static ball(t){const r=i.rawshape_ball(t);return f.__wrap(r)}static halfspace(t){_(t,w);const r=i.rawshape_halfspace(t.__wbg_ptr);return f.__wrap(r)}static capsule(t,r){const e=i.rawshape_capsule(t,r);return f.__wrap(e)}static polyline(t,r){const e=Y(t,i.__wbindgen_malloc),n=F,s=ur(r,i.__wbindgen_malloc),o=F,l=i.rawshape_polyline(e,n,s,o);return f.__wrap(l)}static trimesh(t,r,e){const n=Y(t,i.__wbindgen_malloc),s=F,o=ur(r,i.__wbindgen_malloc),l=F,h=i.rawshape_trimesh(n,s,o,l,e);return f.__wrap(h)}static heightfield(t,r){const e=Y(t,i.__wbindgen_malloc),n=F;_(r,w);const s=i.rawshape_heightfield(e,n,r.__wbg_ptr);return f.__wrap(s)}static segment(t,r){_(t,w),_(r,w);const e=i.rawshape_segment(t.__wbg_ptr,r.__wbg_ptr);return f.__wrap(e)}static triangle(t,r,e){_(t,w),_(r,w),_(e,w);const n=i.rawshape_triangle(t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr);return f.__wrap(n)}static roundTriangle(t,r,e,n){_(t,w),_(r,w),_(e,w);const s=i.rawshape_roundTriangle(t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr,n);return f.__wrap(s)}static convexHull(t){const r=Y(t,i.__wbindgen_malloc),e=F,n=i.rawshape_convexHull(r,e);return n===0?void 0:f.__wrap(n)}static roundConvexHull(t,r){const e=Y(t,i.__wbindgen_malloc),n=F,s=i.rawshape_roundConvexHull(e,n,r);return s===0?void 0:f.__wrap(s)}static convexPolyline(t){const r=Y(t,i.__wbindgen_malloc),e=F,n=i.rawshape_convexPolyline(r,e);return n===0?void 0:f.__wrap(n)}static roundConvexPolyline(t,r){const e=Y(t,i.__wbindgen_malloc),n=F,s=i.rawshape_roundConvexPolyline(e,n,r);return s===0?void 0:f.__wrap(s)}castShape(t,r,e,n,s,o,l,h,d,p){_(t,w),_(r,y),_(e,w),_(n,f),_(s,w),_(o,y),_(l,w);const u=i.rawshape_castShape(this.__wbg_ptr,t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr,n.__wbg_ptr,s.__wbg_ptr,o.__wbg_ptr,l.__wbg_ptr,h,d,p);return u===0?void 0:Tt.__wrap(u)}intersectsShape(t,r,e,n,s){return _(t,w),_(r,y),_(e,f),_(n,w),_(s,y),i.rawshape_intersectsShape(this.__wbg_ptr,t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr,n.__wbg_ptr,s.__wbg_ptr)!==0}contactShape(t,r,e,n,s,o){_(t,w),_(r,y),_(e,f),_(n,w),_(s,y);const l=i.rawshape_contactShape(this.__wbg_ptr,t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr,n.__wbg_ptr,s.__wbg_ptr,o);return l===0?void 0:ot.__wrap(l)}containsPoint(t,r,e){return _(t,w),_(r,y),_(e,w),i.rawshape_containsPoint(this.__wbg_ptr,t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr)!==0}projectPoint(t,r,e,n){_(t,w),_(r,y),_(e,w);const s=i.rawshape_projectPoint(this.__wbg_ptr,t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr,n);return Pt.__wrap(s)}intersectsRay(t,r,e,n,s){return _(t,w),_(r,y),_(e,w),_(n,w),i.rawshape_intersectsRay(this.__wbg_ptr,t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr,n.__wbg_ptr,s)!==0}castRay(t,r,e,n,s,o){return _(t,w),_(r,y),_(e,w),_(n,w),i.rawshape_castRay(this.__wbg_ptr,t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr,n.__wbg_ptr,s,o)}castRayAndGetNormal(t,r,e,n,s,o){_(t,w),_(r,y),_(e,w),_(n,w);const l=i.rawshape_castRayAndGetNormal(this.__wbg_ptr,t.__wbg_ptr,r.__wbg_ptr,e.__wbg_ptr,n.__wbg_ptr,s,o);return l===0?void 0:At.__wrap(l)}}class Tt{static __wrap(t){t=t>>>0;const r=Object.create(Tt.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawshapecasthit_free(t)}time_of_impact(){return i.rawrotation_re(this.__wbg_ptr)}witness1(){const t=i.rawshapecasthit_witness1(this.__wbg_ptr);return w.__wrap(t)}witness2(){const t=i.rawcollidershapecasthit_witness1(this.__wbg_ptr);return w.__wrap(t)}normal1(){const t=i.rawcollidershapecasthit_witness2(this.__wbg_ptr);return w.__wrap(t)}normal2(){const t=i.rawcollidershapecasthit_normal1(this.__wbg_ptr);return w.__wrap(t)}}class ot{static __wrap(t){t=t>>>0;const r=Object.create(ot.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawshapecontact_free(t)}distance(){return i.rawcontactforceevent_total_force_magnitude(this.__wbg_ptr)}point1(){const t=i.rawpointprojection_point(this.__wbg_ptr);return w.__wrap(t)}point2(){const t=i.rawpointcolliderprojection_point(this.__wbg_ptr);return w.__wrap(t)}normal1(){const t=i.rawcontactforceevent_total_force(this.__wbg_ptr);return w.__wrap(t)}normal2(){const t=i.rawcharactercollision_translationDeltaApplied(this.__wbg_ptr);return w.__wrap(t)}}class w{static __wrap(t){t=t>>>0;const r=Object.create(w.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();i.__wbg_rawvector_free(t)}static zero(){const t=i.rawvector_zero();return w.__wrap(t)}constructor(t,r){const e=i.rawvector_new(t,r);return this.__wbg_ptr=e>>>0,this}get x(){return i.rawrotation_re(this.__wbg_ptr)}set x(t){i.rawvector_set_x(this.__wbg_ptr,t)}get y(){return i.rawintegrationparameters_dt(this.__wbg_ptr)}set y(t){i.rawintegrationparameters_set_dt(this.__wbg_ptr,t)}xy(){const t=i.rawvector_xy(this.__wbg_ptr);return w.__wrap(t)}yx(){const t=i.rawvector_yx(this.__wbg_ptr);return w.__wrap(t)}}class yr{constructor(t,r){this.x=t,this.y=r}}class c{static new(t,r){return new yr(t,r)}static zeros(){return c.new(0,0)}static fromRaw(t){if(!t)return null;let r=c.new(t.x,t.y);return t.free(),r}static intoRaw(t){return new w(t.x,t.y)}static copy(t,r){t.x=r.x,t.y=r.y}}class R{static identity(){return 0}static fromRaw(t){if(!t)return null;let r=t.angle;return t.free(),r}static intoRaw(t){return y.fromAngle(t)}}var H;(function(a){a[a.Dynamic=0]="Dynamic",a[a.Fixed=1]="Fixed",a[a.KinematicPositionBased=2]="KinematicPositionBased",a[a.KinematicVelocityBased=3]="KinematicVelocityBased"})(H||(H={}));class zt{constructor(t,r,e){this.rawSet=t,this.colliderSet=r,this.handle=e}finalizeDeserialization(t){this.colliderSet=t}isValid(){return this.rawSet.contains(this.handle)}lockTranslations(t,r){return this.rawSet.rbLockTranslations(this.handle,t,r)}lockRotations(t,r){return this.rawSet.rbLockRotations(this.handle,t,r)}setEnabledTranslations(t,r,e){return this.rawSet.rbSetEnabledTranslations(this.handle,t,r,e)}restrictTranslations(t,r,e){this.setEnabledTranslations(t,t,e)}dominanceGroup(){return this.rawSet.rbDominanceGroup(this.handle)}setDominanceGroup(t){this.rawSet.rbSetDominanceGroup(this.handle,t)}additionalSolverIterations(){return this.rawSet.rbAdditionalSolverIterations(this.handle)}setAdditionalSolverIterations(t){this.rawSet.rbSetAdditionalSolverIterations(this.handle,t)}enableCcd(t){this.rawSet.rbEnableCcd(this.handle,t)}setSoftCcdPrediction(t){this.rawSet.rbSetSoftCcdPrediction(this.handle,t)}softCcdPrediction(){return this.rawSet.rbSoftCcdPrediction(this.handle)}translation(){let t=this.rawSet.rbTranslation(this.handle);return c.fromRaw(t)}rotation(){let t=this.rawSet.rbRotation(this.handle);return R.fromRaw(t)}nextTranslation(){let t=this.rawSet.rbNextTranslation(this.handle);return c.fromRaw(t)}nextRotation(){let t=this.rawSet.rbNextRotation(this.handle);return R.fromRaw(t)}setTranslation(t,r){this.rawSet.rbSetTranslation(this.handle,t.x,t.y,r)}setLinvel(t,r){let e=c.intoRaw(t);this.rawSet.rbSetLinvel(this.handle,e,r),e.free()}gravityScale(){return this.rawSet.rbGravityScale(this.handle)}setGravityScale(t,r){this.rawSet.rbSetGravityScale(this.handle,t,r)}setRotation(t,r){this.rawSet.rbSetRotation(this.handle,t,r)}setAngvel(t,r){this.rawSet.rbSetAngvel(this.handle,t,r)}setNextKinematicTranslation(t){this.rawSet.rbSetNextKinematicTranslation(this.handle,t.x,t.y)}setNextKinematicRotation(t){this.rawSet.rbSetNextKinematicRotation(this.handle,t)}linvel(){return c.fromRaw(this.rawSet.rbLinvel(this.handle))}angvel(){return this.rawSet.rbAngvel(this.handle)}mass(){return this.rawSet.rbMass(this.handle)}effectiveInvMass(){return c.fromRaw(this.rawSet.rbEffectiveInvMass(this.handle))}invMass(){return this.rawSet.rbInvMass(this.handle)}localCom(){return c.fromRaw(this.rawSet.rbLocalCom(this.handle))}worldCom(){return c.fromRaw(this.rawSet.rbWorldCom(this.handle))}invPrincipalInertiaSqrt(){return this.rawSet.rbInvPrincipalInertiaSqrt(this.handle)}principalInertia(){return this.rawSet.rbPrincipalInertia(this.handle)}effectiveWorldInvInertiaSqrt(){return this.rawSet.rbEffectiveWorldInvInertiaSqrt(this.handle)}effectiveAngularInertia(){return this.rawSet.rbEffectiveAngularInertia(this.handle)}sleep(){this.rawSet.rbSleep(this.handle)}wakeUp(){this.rawSet.rbWakeUp(this.handle)}isCcdEnabled(){return this.rawSet.rbIsCcdEnabled(this.handle)}numColliders(){return this.rawSet.rbNumColliders(this.handle)}collider(t){return this.colliderSet.get(this.rawSet.rbCollider(this.handle,t))}setEnabled(t){this.rawSet.rbSetEnabled(this.handle,t)}isEnabled(){return this.rawSet.rbIsEnabled(this.handle)}bodyType(){return this.rawSet.rbBodyType(this.handle)}setBodyType(t,r){return this.rawSet.rbSetBodyType(this.handle,t,r)}isSleeping(){return this.rawSet.rbIsSleeping(this.handle)}isMoving(){return this.rawSet.rbIsMoving(this.handle)}isFixed(){return this.rawSet.rbIsFixed(this.handle)}isKinematic(){return this.rawSet.rbIsKinematic(this.handle)}isDynamic(){return this.rawSet.rbIsDynamic(this.handle)}linearDamping(){return this.rawSet.rbLinearDamping(this.handle)}angularDamping(){return this.rawSet.rbAngularDamping(this.handle)}setLinearDamping(t){this.rawSet.rbSetLinearDamping(this.handle,t)}recomputeMassPropertiesFromColliders(){this.rawSet.rbRecomputeMassPropertiesFromColliders(this.handle,this.colliderSet.raw)}setAdditionalMass(t,r){this.rawSet.rbSetAdditionalMass(this.handle,t,r)}setAdditionalMassProperties(t,r,e,n){let s=c.intoRaw(r);this.rawSet.rbSetAdditionalMassProperties(this.handle,t,s,e,n),s.free()}setAngularDamping(t){this.rawSet.rbSetAngularDamping(this.handle,t)}resetForces(t){this.rawSet.rbResetForces(this.handle,t)}resetTorques(t){this.rawSet.rbResetTorques(this.handle,t)}addForce(t,r){const e=c.intoRaw(t);this.rawSet.rbAddForce(this.handle,e,r),e.free()}applyImpulse(t,r){const e=c.intoRaw(t);this.rawSet.rbApplyImpulse(this.handle,e,r),e.free()}addTorque(t,r){this.rawSet.rbAddTorque(this.handle,t,r)}applyTorqueImpulse(t,r){this.rawSet.rbApplyTorqueImpulse(this.handle,t,r)}addForceAtPoint(t,r,e){const n=c.intoRaw(t),s=c.intoRaw(r);this.rawSet.rbAddForceAtPoint(this.handle,n,s,e),n.free(),s.free()}applyImpulseAtPoint(t,r,e){const n=c.intoRaw(t),s=c.intoRaw(r);this.rawSet.rbApplyImpulseAtPoint(this.handle,n,s,e),n.free(),s.free()}}class L{constructor(t){this.enabled=!0,this.status=t,this.translation=c.zeros(),this.rotation=R.identity(),this.gravityScale=1,this.linvel=c.zeros(),this.mass=0,this.massOnly=!1,this.centerOfMass=c.zeros(),this.translationsEnabledX=!0,this.translationsEnabledY=!0,this.angvel=0,this.principalAngularInertia=0,this.rotationsEnabled=!0,this.linearDamping=0,this.angularDamping=0,this.canSleep=!0,this.sleeping=!1,this.ccdEnabled=!1,this.softCcdPrediction=0,this.dominanceGroup=0,this.additionalSolverIterations=0}static dynamic(){return new L(H.Dynamic)}static kinematicPositionBased(){return new L(H.KinematicPositionBased)}static kinematicVelocityBased(){return new L(H.KinematicVelocityBased)}static fixed(){return new L(H.Fixed)}static newDynamic(){return new L(H.Dynamic)}static newKinematicPositionBased(){return new L(H.KinematicPositionBased)}static newKinematicVelocityBased(){return new L(H.KinematicVelocityBased)}static newStatic(){return new L(H.Fixed)}setDominanceGroup(t){return this.dominanceGroup=t,this}setAdditionalSolverIterations(t){return this.additionalSolverIterations=t,this}setEnabled(t){return this.enabled=t,this}setTranslation(t,r){if(typeof t!="number"||typeof r!="number")throw TypeError("The translation components must be numbers.");return this.translation={x:t,y:r},this}setRotation(t){return this.rotation=t,this}setGravityScale(t){return this.gravityScale=t,this}setAdditionalMass(t){return this.mass=t,this.massOnly=!0,this}setLinvel(t,r){if(typeof t!="number"||typeof r!="number")throw TypeError("The linvel components must be numbers.");return this.linvel={x:t,y:r},this}setAngvel(t){return this.angvel=t,this}setAdditionalMassProperties(t,r,e){return this.mass=t,c.copy(this.centerOfMass,r),this.principalAngularInertia=e,this.massOnly=!1,this}enabledTranslations(t,r){return this.translationsEnabledX=t,this.translationsEnabledY=r,this}restrictTranslations(t,r){return this.enabledTranslations(t,r)}lockTranslations(){return this.restrictTranslations(!1,!1)}lockRotations(){return this.rotationsEnabled=!1,this}setLinearDamping(t){return this.linearDamping=t,this}setAngularDamping(t){return this.angularDamping=t,this}setCanSleep(t){return this.canSleep=t,this}setSleeping(t){return this.sleeping=t,this}setCcdEnabled(t){return this.ccdEnabled=t,this}setSoftCcdPrediction(t){return this.softCcdPrediction=t,this}setUserData(t){return this.userData=t,this}}class jt{constructor(){this.fconv=new Float64Array(1),this.uconv=new Uint32Array(this.fconv.buffer),this.data=new Array,this.size=0}set(t,r){let e=this.index(t);for(;this.data.length<=e;)this.data.push(null);this.data[e]==null&&(this.size+=1),this.data[e]=r}len(){return this.size}delete(t){let r=this.index(t);r<this.data.length&&(this.data[r]!=null&&(this.size-=1),this.data[r]=null)}clear(){this.data=new Array}get(t){let r=this.index(t);return r<this.data.length?this.data[r]:null}forEach(t){for(const r of this.data)r!=null&&t(r)}getAll(){return this.data.filter(t=>t!=null)}index(t){return this.fconv[0]=t,this.uconv[0]}}class Rr{constructor(t){this.raw=t||new A,this.map=new jt,t&&t.forEachRigidBodyHandle(r=>{this.map.set(r,new zt(t,null,r))})}free(){this.raw&&this.raw.free(),this.raw=void 0,this.map&&this.map.clear(),this.map=void 0}finalizeDeserialization(t){this.map.forEach(r=>r.finalizeDeserialization(t))}createRigidBody(t,r){let e=c.intoRaw(r.translation),n=R.intoRaw(r.rotation),s=c.intoRaw(r.linvel),o=c.intoRaw(r.centerOfMass),l=this.raw.createRigidBody(r.enabled,e,n,r.gravityScale,r.mass,r.massOnly,o,s,r.angvel,r.principalAngularInertia,r.translationsEnabledX,r.translationsEnabledY,r.rotationsEnabled,r.linearDamping,r.angularDamping,r.status,r.canSleep,r.sleeping,r.softCcdPrediction,r.ccdEnabled,r.dominanceGroup,r.additionalSolverIterations);e.free(),n.free(),s.free(),o.free();const h=new zt(this.raw,t,l);return h.userData=r.userData,this.map.set(l,h),h}remove(t,r,e,n,s){for(let o=0;o<this.raw.rbNumColliders(t);o+=1)e.unmap(this.raw.rbCollider(t,o));n.forEachJointHandleAttachedToRigidBody(t,o=>n.unmap(o)),s.forEachJointHandleAttachedToRigidBody(t,o=>s.unmap(o)),this.raw.remove(t,r.raw,e.raw,n.raw,s.raw),this.map.delete(t)}len(){return this.map.len()}contains(t){return this.get(t)!=null}get(t){return this.map.get(t)}forEach(t){this.map.forEach(t)}forEachActiveRigidBody(t,r){t.forEachActiveRigidBodyHandle(e=>{r(this.get(e))})}getAll(){return this.map.getAll()}}class vr{constructor(t){this.raw=t||new tt}free(){this.raw&&this.raw.free(),this.raw=void 0}get dt(){return this.raw.dt}get erp(){return this.raw.erp}get lengthUnit(){return this.raw.lengthUnit}get normalizedAllowedLinearError(){return this.raw.normalizedAllowedLinearError}get normalizedPredictionDistance(){return this.raw.normalizedPredictionDistance}get numSolverIterations(){return this.raw.numSolverIterations}get numAdditionalFrictionIterations(){return this.raw.numAdditionalFrictionIterations}get numInternalPgsIterations(){return this.raw.numInternalPgsIterations}get minIslandSize(){return this.raw.minIslandSize}get maxCcdSubsteps(){return this.raw.maxCcdSubsteps}set dt(t){this.raw.dt=t}set erp(t){this.raw.erp=t}set lengthUnit(t){this.raw.lengthUnit=t}set normalizedAllowedLinearError(t){this.raw.normalizedAllowedLinearError=t}set normalizedPredictionDistance(t){this.raw.normalizedPredictionDistance=t}set numSolverIterations(t){this.raw.numSolverIterations=t}set numAdditionalFrictionIterations(t){this.raw.numAdditionalFrictionIterations=t}set numInternalPgsIterations(t){this.raw.numInternalPgsIterations=t}set minIslandSize(t){this.raw.minIslandSize=t}set maxCcdSubsteps(t){this.raw.maxCcdSubsteps=t}switchToStandardPgsSolver(){this.raw.switchToStandardPgsSolver()}switchToSmallStepsPgsSolver(){this.raw.switchToSmallStepsPgsSolver()}switchToSmallStepsPgsSolverWithoutWarmstart(){this.raw.switchToSmallStepsPgsSolverWithoutWarmstart()}}var x;(function(a){a[a.Revolute=0]="Revolute",a[a.Fixed=1]="Fixed",a[a.Prismatic=2]="Prismatic",a[a.Rope=3]="Rope",a[a.Spring=4]="Spring"})(x||(x={}));var Ot;(function(a){a[a.AccelerationBased=0]="AccelerationBased",a[a.ForceBased=1]="ForceBased"})(Ot||(Ot={}));var Wt;(function(a){a[a.X=1]="X",a[a.Y=2]="Y",a[a.Z=4]="Z",a[a.AngX=8]="AngX",a[a.AngY=16]="AngY",a[a.AngZ=32]="AngZ"})(Wt||(Wt={}));class q{constructor(t,r,e){this.rawSet=t,this.bodySet=r,this.handle=e}static newTyped(t,r,e){switch(t.jointType(e)){case X.Revolute:return new Ar(t,r,e);case X.Prismatic:return new Pr(t,r,e);case X.Fixed:return new Cr(t,r,e);case X.Spring:return new Ir(t,r,e);case X.Rope:return new Er(t,r,e);default:return new q(t,r,e)}}finalizeDeserialization(t){this.bodySet=t}isValid(){return this.rawSet.contains(this.handle)}body1(){return this.bodySet.get(this.rawSet.jointBodyHandle1(this.handle))}body2(){return this.bodySet.get(this.rawSet.jointBodyHandle2(this.handle))}type(){return this.rawSet.jointType(this.handle)}anchor1(){return c.fromRaw(this.rawSet.jointAnchor1(this.handle))}anchor2(){return c.fromRaw(this.rawSet.jointAnchor2(this.handle))}setAnchor1(t){const r=c.intoRaw(t);this.rawSet.jointSetAnchor1(this.handle,r),r.free()}setAnchor2(t){const r=c.intoRaw(t);this.rawSet.jointSetAnchor2(this.handle,r),r.free()}setContactsEnabled(t){this.rawSet.jointSetContactsEnabled(this.handle,t)}contactsEnabled(){return this.rawSet.jointContactsEnabled(this.handle)}}class Qt extends q{limitsEnabled(){return this.rawSet.jointLimitsEnabled(this.handle,this.rawAxis())}limitsMin(){return this.rawSet.jointLimitsMin(this.handle,this.rawAxis())}limitsMax(){return this.rawSet.jointLimitsMax(this.handle,this.rawAxis())}setLimits(t,r){this.rawSet.jointSetLimits(this.handle,this.rawAxis(),t,r)}configureMotorModel(t){this.rawSet.jointConfigureMotorModel(this.handle,this.rawAxis(),t)}configureMotorVelocity(t,r){this.rawSet.jointConfigureMotorVelocity(this.handle,this.rawAxis(),t,r)}configureMotorPosition(t,r,e){this.rawSet.jointConfigureMotorPosition(this.handle,this.rawAxis(),t,r,e)}configureMotor(t,r,e,n){this.rawSet.jointConfigureMotor(this.handle,this.rawAxis(),t,r,e,n)}}class Cr extends q{}class Er extends q{}class Ir extends q{}class Pr extends Qt{rawAxis(){return Et.X}}class Ar extends Qt{rawAxis(){return Et.AngX}}class Z{constructor(){}static fixed(t,r,e,n){let s=new Z;return s.anchor1=t,s.anchor2=e,s.frame1=r,s.frame2=n,s.jointType=x.Fixed,s}static spring(t,r,e,n,s){let o=new Z;return o.anchor1=n,o.anchor2=s,o.length=t,o.stiffness=r,o.damping=e,o.jointType=x.Spring,o}static rope(t,r,e){let n=new Z;return n.anchor1=r,n.anchor2=e,n.length=t,n.jointType=x.Rope,n}static revolute(t,r){let e=new Z;return e.anchor1=t,e.anchor2=r,e.jointType=x.Revolute,e}static prismatic(t,r,e){let n=new Z;return n.anchor1=t,n.anchor2=r,n.axis=e,n.jointType=x.Prismatic,n}intoRaw(){let t=c.intoRaw(this.anchor1),r=c.intoRaw(this.anchor2),e,n,s=!1,o=0,l=0;switch(this.jointType){case x.Fixed:let h=R.intoRaw(this.frame1),d=R.intoRaw(this.frame2);n=N.fixed(t,h,r,d),h.free(),d.free();break;case x.Spring:n=N.spring(this.length,this.stiffness,this.damping,t,r);break;case x.Rope:n=N.rope(this.length,t,r);break;case x.Prismatic:e=c.intoRaw(this.axis),this.limitsEnabled&&(s=!0,o=this.limits[0],l=this.limits[1]),n=N.prismatic(t,r,e,s,o,l),e.free();break;case x.Revolute:n=N.revolute(t,r);break}return t.free(),r.free(),n}}class Tr{constructor(t){this.raw=t||new W,this.map=new jt,t&&t.forEachJointHandle(r=>{this.map.set(r,q.newTyped(t,null,r))})}free(){this.raw&&this.raw.free(),this.raw=void 0,this.map&&this.map.clear(),this.map=void 0}finalizeDeserialization(t){this.map.forEach(r=>r.finalizeDeserialization(t))}createJoint(t,r,e,n,s){const o=r.intoRaw(),l=this.raw.createJoint(o,e,n,s);o.free();let h=q.newTyped(this.raw,t,l);return this.map.set(l,h),h}remove(t,r){this.raw.remove(t,r),this.unmap(t)}forEachJointHandleAttachedToRigidBody(t,r){this.raw.forEachJointAttachedToRigidBody(t,r)}unmap(t){this.map.delete(t)}len(){return this.map.len()}contains(t){return this.get(t)!=null}get(t){return this.map.get(t)}forEach(t){this.map.forEach(t)}getAll(){return this.map.getAll()}}class rt{constructor(t,r){this.rawSet=t,this.handle=r}static newTyped(t,r){switch(t.jointType(r)){case X.Revolute:return new Dr(t,r);case X.Prismatic:return new Mr(t,r);case X.Fixed:return new jr(t,r);default:return new rt(t,r)}}isValid(){return this.rawSet.contains(this.handle)}setContactsEnabled(t){this.rawSet.jointSetContactsEnabled(this.handle,t)}contactsEnabled(){return this.rawSet.jointContactsEnabled(this.handle)}}class tr extends rt{}class jr extends rt{}class Mr extends tr{rawAxis(){return Et.X}}class Dr extends tr{rawAxis(){return Et.AngX}}class Nr{constructor(t){this.raw=t||new U,this.map=new jt,t&&t.forEachJointHandle(r=>{this.map.set(r,rt.newTyped(this.raw,r))})}free(){this.raw&&this.raw.free(),this.raw=void 0,this.map&&this.map.clear(),this.map=void 0}createJoint(t,r,e,n){const s=t.intoRaw(),o=this.raw.createJoint(s,r,e,n);s.free();let l=rt.newTyped(this.raw,o);return this.map.set(o,l),l}remove(t,r){this.raw.remove(t,r),this.map.delete(t)}unmap(t){this.map.delete(t)}len(){return this.map.len()}contains(t){return this.get(t)!=null}get(t){return this.map.get(t)}forEach(t){this.map.forEach(t)}forEachJointHandleAttachedToRigidBody(t,r){this.raw.forEachJointAttachedToRigidBody(t,r)}getAll(){return this.map.getAll()}}var _t;(function(a){a[a.Average=0]="Average",a[a.Min=1]="Min",a[a.Multiply=2]="Multiply",a[a.Max=3]="Max"})(_t||(_t={}));class kr{constructor(t){this.raw=t||new Gt}free(){this.raw&&this.raw.free(),this.raw=void 0}}class xr{constructor(t){this.raw=t||new B}free(){this.raw&&this.raw.free(),this.raw=void 0}forEachActiveRigidBodyHandle(t){this.raw.forEachActiveRigidBodyHandle(t)}}class Fr{constructor(t){this.raw=t||new Q}free(){this.raw&&this.raw.free(),this.raw=void 0}}class Hr{constructor(t){this.raw=t||new V,this.tempManifold=new Lr(null)}free(){this.raw&&this.raw.free(),this.raw=void 0}contactPairsWith(t,r){this.raw.contact_pairs_with(t,r)}intersectionPairsWith(t,r){this.raw.intersection_pairs_with(t,r)}contactPair(t,r,e){const n=this.raw.contact_pair(t,r);if(n){const s=n.collider1()!=t;let o;for(o=0;o<n.numContactManifolds();++o)this.tempManifold.raw=n.contactManifold(o),this.tempManifold.raw&&e(this.tempManifold,s),this.tempManifold.free();n.free()}}intersectionPair(t,r){return this.raw.intersection_pair(t,r)}}class Lr{constructor(t){this.raw=t}free(){this.raw&&this.raw.free(),this.raw=void 0}normal(){return c.fromRaw(this.raw.normal())}localNormal1(){return c.fromRaw(this.raw.local_n1())}localNormal2(){return c.fromRaw(this.raw.local_n2())}subshape1(){return this.raw.subshape1()}subshape2(){return this.raw.subshape2()}numContacts(){return this.raw.num_contacts()}localContactPoint1(t){return c.fromRaw(this.raw.contact_local_p1(t))}localContactPoint2(t){return c.fromRaw(this.raw.contact_local_p2(t))}contactDist(t){return this.raw.contact_dist(t)}contactFid1(t){return this.raw.contact_fid1(t)}contactFid2(t){return this.raw.contact_fid2(t)}contactImpulse(t){return this.raw.contact_impulse(t)}contactTangentImpulse(t){return this.raw.contact_tangent_impulse(t)}numSolverContacts(){return this.raw.num_solver_contacts()}solverContactPoint(t){return c.fromRaw(this.raw.solver_contact_point(t))}solverContactDist(t){return this.raw.solver_contact_dist(t)}solverContactFriction(t){return this.raw.solver_contact_friction(t)}solverContactRestitution(t){return this.raw.solver_contact_restitution(t)}solverContactTangentVelocity(t){return c.fromRaw(this.raw.solver_contact_tangent_velocity(t))}}class it{constructor(t,r,e,n,s){this.distance=t,this.point1=r,this.point2=e,this.normal1=n,this.normal2=s}static fromRaw(t){if(!t)return null;const r=new it(t.distance(),c.fromRaw(t.point1()),c.fromRaw(t.point2()),c.fromRaw(t.normal1()),c.fromRaw(t.normal2()));return t.free(),r}}var nt;(function(a){a[a.Vertex=0]="Vertex",a[a.Face=1]="Face",a[a.Unknown=2]="Unknown"})(nt||(nt={}));class wt{constructor(t,r){this.point=t,this.isInside=r}static fromRaw(t){if(!t)return null;const r=new wt(c.fromRaw(t.point()),t.isInside());return t.free(),r}}class lt{constructor(t,r,e,n,s){this.featureType=nt.Unknown,this.featureId=void 0,this.collider=t,this.point=r,this.isInside=e,s!==void 0&&(this.featureId=s),n!==void 0&&(this.featureType=n)}static fromRaw(t,r){if(!r)return null;const e=new lt(t.get(r.colliderHandle()),c.fromRaw(r.point()),r.isInside(),r.featureType(),r.featureId());return r.free(),e}}class ae{constructor(t,r){this.origin=t,this.dir=r}pointAt(t){return{x:this.origin.x+this.dir.x*t,y:this.origin.y+this.dir.y*t}}}class ht{constructor(t,r,e,n){this.featureType=nt.Unknown,this.featureId=void 0,this.timeOfImpact=t,this.normal=r,n!==void 0&&(this.featureId=n),e!==void 0&&(this.featureType=e)}static fromRaw(t){if(!t)return null;const r=new ht(t.time_of_impact(),c.fromRaw(t.normal()),t.featureType(),t.featureId());return t.free(),r}}class ct{constructor(t,r,e,n,s){this.featureType=nt.Unknown,this.featureId=void 0,this.collider=t,this.timeOfImpact=r,this.normal=e,s!==void 0&&(this.featureId=s),n!==void 0&&(this.featureType=n)}static fromRaw(t,r){if(!r)return null;const e=new ct(t.get(r.colliderHandle()),r.time_of_impact(),c.fromRaw(r.normal()),r.featureType(),r.featureId());return r.free(),e}}class Mt{constructor(t,r){this.collider=t,this.timeOfImpact=r}static fromRaw(t,r){if(!r)return null;const e=new Mt(t.get(r.colliderHandle()),r.timeOfImpact());return r.free(),e}}class st{constructor(t,r,e,n,s){this.time_of_impact=t,this.witness1=r,this.witness2=e,this.normal1=n,this.normal2=s}static fromRaw(t,r){if(!r)return null;const e=new st(r.time_of_impact(),c.fromRaw(r.witness1()),c.fromRaw(r.witness2()),c.fromRaw(r.normal1()),c.fromRaw(r.normal2()));return r.free(),e}}class dt extends st{constructor(t,r,e,n,s,o){super(r,e,n,s,o),this.collider=t}static fromRaw(t,r){if(!r)return null;const e=new dt(t.get(r.colliderHandle()),r.time_of_impact(),c.fromRaw(r.witness1()),c.fromRaw(r.witness2()),c.fromRaw(r.normal1()),c.fromRaw(r.normal2()));return r.free(),e}}class M{static fromRaw(t,r){const e=t.coShapeType(r);let n,s,o,l,h,d,p;switch(e){case k.Ball:return new rr(t.coRadius(r));case k.Cuboid:return n=t.coHalfExtents(r),new ir(n.x,n.y);case k.RoundCuboid:return n=t.coHalfExtents(r),s=t.coRoundRadius(r),new nr(n.x,n.y,s);case k.Capsule:return h=t.coHalfHeight(r),d=t.coRadius(r),new sr(h,d);case k.Segment:return o=t.coVertices(r),new ar(c.new(o[0],o[1]),c.new(o[2],o[3]));case k.Polyline:return o=t.coVertices(r),l=t.coIndices(r),new lr(o,l);case k.Triangle:return o=t.coVertices(r),new or(c.new(o[0],o[1]),c.new(o[2],o[3]),c.new(o[4],o[5]));case k.RoundTriangle:return o=t.coVertices(r),s=t.coRoundRadius(r),new _r(c.new(o[0],o[1]),c.new(o[2],o[3]),c.new(o[4],o[5]),s);case k.HalfSpace:return p=c.fromRaw(t.coHalfspaceNormal(r)),new er(p);case k.TriMesh:o=t.coVertices(r),l=t.coIndices(r);const u=t.coTriMeshFlags(r);return new cr(o,l,u);case k.HeightField:const b=t.coHeightfieldScale(r),m=t.coHeightfieldHeights(r);return new wr(m,b);case k.ConvexPolygon:return o=t.coVertices(r),new St(o,!1);case k.RoundConvexPolygon:return o=t.coVertices(r),s=t.coRoundRadius(r),new yt(o,s,!1);default:throw new Error("unknown shape type: "+e)}}castShape(t,r,e,n,s,o,l,h,d,p){let u=c.intoRaw(t),b=R.intoRaw(r),m=c.intoRaw(e),E=c.intoRaw(s),D=R.intoRaw(o),G=c.intoRaw(l),z=this.intoRaw(),O=n.intoRaw(),K=st.fromRaw(null,z.castShape(u,b,m,O,E,D,G,h,d,p));return u.free(),b.free(),m.free(),E.free(),D.free(),G.free(),z.free(),O.free(),K}intersectsShape(t,r,e,n,s){let o=c.intoRaw(t),l=R.intoRaw(r),h=c.intoRaw(n),d=R.intoRaw(s),p=this.intoRaw(),u=e.intoRaw(),b=p.intersectsShape(o,l,u,h,d);return o.free(),l.free(),h.free(),d.free(),p.free(),u.free(),b}contactShape(t,r,e,n,s,o){let l=c.intoRaw(t),h=R.intoRaw(r),d=c.intoRaw(n),p=R.intoRaw(s),u=this.intoRaw(),b=e.intoRaw(),m=it.fromRaw(u.contactShape(l,h,b,d,p,o));return l.free(),h.free(),d.free(),p.free(),u.free(),b.free(),m}containsPoint(t,r,e){let n=c.intoRaw(t),s=R.intoRaw(r),o=c.intoRaw(e),l=this.intoRaw(),h=l.containsPoint(n,s,o);return n.free(),s.free(),o.free(),l.free(),h}projectPoint(t,r,e,n){let s=c.intoRaw(t),o=R.intoRaw(r),l=c.intoRaw(e),h=this.intoRaw(),d=wt.fromRaw(h.projectPoint(s,o,l,n));return s.free(),o.free(),l.free(),h.free(),d}intersectsRay(t,r,e,n){let s=c.intoRaw(r),o=R.intoRaw(e),l=c.intoRaw(t.origin),h=c.intoRaw(t.dir),d=this.intoRaw(),p=d.intersectsRay(s,o,l,h,n);return s.free(),o.free(),l.free(),h.free(),d.free(),p}castRay(t,r,e,n,s){let o=c.intoRaw(r),l=R.intoRaw(e),h=c.intoRaw(t.origin),d=c.intoRaw(t.dir),p=this.intoRaw(),u=p.castRay(o,l,h,d,n,s);return o.free(),l.free(),h.free(),d.free(),p.free(),u}castRayAndGetNormal(t,r,e,n,s){let o=c.intoRaw(r),l=R.intoRaw(e),h=c.intoRaw(t.origin),d=c.intoRaw(t.dir),p=this.intoRaw(),u=ht.fromRaw(p.castRayAndGetNormal(o,l,h,d,n,s));return o.free(),l.free(),h.free(),d.free(),p.free(),u}}var j;(function(a){a[a.Ball=0]="Ball",a[a.Cuboid=1]="Cuboid",a[a.Capsule=2]="Capsule",a[a.Segment=3]="Segment",a[a.Polyline=4]="Polyline",a[a.Triangle=5]="Triangle",a[a.TriMesh=6]="TriMesh",a[a.HeightField=7]="HeightField",a[a.ConvexPolygon=9]="ConvexPolygon",a[a.RoundCuboid=10]="RoundCuboid",a[a.RoundTriangle=11]="RoundTriangle",a[a.RoundConvexPolygon=12]="RoundConvexPolygon",a[a.HalfSpace=13]="HalfSpace"})(j||(j={}));var Bt;(function(a){a[a.DELETE_BAD_TOPOLOGY_TRIANGLES=4]="DELETE_BAD_TOPOLOGY_TRIANGLES",a[a.ORIENTED=8]="ORIENTED",a[a.MERGE_DUPLICATE_VERTICES=16]="MERGE_DUPLICATE_VERTICES",a[a.DELETE_DEGENERATE_TRIANGLES=32]="DELETE_DEGENERATE_TRIANGLES",a[a.DELETE_DUPLICATE_TRIANGLES=64]="DELETE_DUPLICATE_TRIANGLES",a[a.FIX_INTERNAL_EDGES=152]="FIX_INTERNAL_EDGES"})(Bt||(Bt={}));class rr extends M{constructor(t){super(),this.type=j.Ball,this.radius=t}intoRaw(){return f.ball(this.radius)}}class er extends M{constructor(t){super(),this.type=j.HalfSpace,this.normal=t}intoRaw(){let t=c.intoRaw(this.normal),r=f.halfspace(t);return t.free(),r}}class ir extends M{constructor(t,r){super(),this.type=j.Cuboid,this.halfExtents=c.new(t,r)}intoRaw(){return f.cuboid(this.halfExtents.x,this.halfExtents.y)}}class nr extends M{constructor(t,r,e){super(),this.type=j.RoundCuboid,this.halfExtents=c.new(t,r),this.borderRadius=e}intoRaw(){return f.roundCuboid(this.halfExtents.x,this.halfExtents.y,this.borderRadius)}}class sr extends M{constructor(t,r){super(),this.type=j.Capsule,this.halfHeight=t,this.radius=r}intoRaw(){return f.capsule(this.halfHeight,this.radius)}}class ar extends M{constructor(t,r){super(),this.type=j.Segment,this.a=t,this.b=r}intoRaw(){let t=c.intoRaw(this.a),r=c.intoRaw(this.b),e=f.segment(t,r);return t.free(),r.free(),e}}class or extends M{constructor(t,r,e){super(),this.type=j.Triangle,this.a=t,this.b=r,this.c=e}intoRaw(){let t=c.intoRaw(this.a),r=c.intoRaw(this.b),e=c.intoRaw(this.c),n=f.triangle(t,r,e);return t.free(),r.free(),e.free(),n}}class _r extends M{constructor(t,r,e,n){super(),this.type=j.RoundTriangle,this.a=t,this.b=r,this.c=e,this.borderRadius=n}intoRaw(){let t=c.intoRaw(this.a),r=c.intoRaw(this.b),e=c.intoRaw(this.c),n=f.roundTriangle(t,r,e,this.borderRadius);return t.free(),r.free(),e.free(),n}}class lr extends M{constructor(t,r){super(),this.type=j.Polyline,this.vertices=t,this.indices=r??new Uint32Array(0)}intoRaw(){return f.polyline(this.vertices,this.indices)}}class cr extends M{constructor(t,r,e){super(),this.type=j.TriMesh,this.vertices=t,this.indices=r,this.flags=e}intoRaw(){return f.trimesh(this.vertices,this.indices,this.flags)}}class St extends M{constructor(t,r){super(),this.type=j.ConvexPolygon,this.vertices=t,this.skipConvexHullComputation=!!r}intoRaw(){return this.skipConvexHullComputation?f.convexPolyline(this.vertices):f.convexHull(this.vertices)}}class yt extends M{constructor(t,r,e){super(),this.type=j.RoundConvexPolygon,this.vertices=t,this.borderRadius=r,this.skipConvexHullComputation=!!e}intoRaw(){return this.skipConvexHullComputation?f.roundConvexPolyline(this.vertices,this.borderRadius):f.roundConvexHull(this.vertices,this.borderRadius)}}class wr extends M{constructor(t,r){super(),this.type=j.HeightField,this.heights=t,this.scale=r}intoRaw(){let t=c.intoRaw(this.scale),r=f.heightfield(this.heights,t);return t.free(),r}}class Gr{constructor(t){this.raw=t||new ne}free(){this.raw&&this.raw.free(),this.raw=void 0}step(t,r,e,n,s,o,l,h,d,p,u,b){let m=c.intoRaw(t);u?this.raw.stepWithEvents(m,r.raw,e.raw,n.raw,s.raw,o.raw,l.raw,h.raw,d.raw,p.raw,u.raw,b,b?b.filterContactPair:null,b?b.filterIntersectionPair:null):this.raw.step(m,r.raw,e.raw,n.raw,s.raw,o.raw,l.raw,h.raw,d.raw,p.raw),m.free()}}var Ut;(function(a){a[a.EXCLUDE_FIXED=1]="EXCLUDE_FIXED",a[a.EXCLUDE_KINEMATIC=2]="EXCLUDE_KINEMATIC",a[a.EXCLUDE_DYNAMIC=4]="EXCLUDE_DYNAMIC",a[a.EXCLUDE_SENSORS=8]="EXCLUDE_SENSORS",a[a.EXCLUDE_SOLIDS=16]="EXCLUDE_SOLIDS",a[a.ONLY_DYNAMIC=3]="ONLY_DYNAMIC",a[a.ONLY_KINEMATIC=5]="ONLY_KINEMATIC",a[a.ONLY_FIXED=6]="ONLY_FIXED"})(Ut||(Ut={}));class zr{constructor(t){this.raw=t||new Sr}free(){this.raw&&this.raw.free(),this.raw=void 0}update(t,r){this.raw.update(t.raw,r.raw)}castRay(t,r,e,n,s,o,l,h,d,p){let u=c.intoRaw(e.origin),b=c.intoRaw(e.dir),m=Mt.fromRaw(r,this.raw.castRay(t.raw,r.raw,u,b,n,s,o,l,h,d,p));return u.free(),b.free(),m}castRayAndGetNormal(t,r,e,n,s,o,l,h,d,p){let u=c.intoRaw(e.origin),b=c.intoRaw(e.dir),m=ct.fromRaw(r,this.raw.castRayAndGetNormal(t.raw,r.raw,u,b,n,s,o,l,h,d,p));return u.free(),b.free(),m}intersectionsWithRay(t,r,e,n,s,o,l,h,d,p,u){let b=c.intoRaw(e.origin),m=c.intoRaw(e.dir),E=D=>o(ct.fromRaw(r,D));this.raw.intersectionsWithRay(t.raw,r.raw,b,m,n,s,E,l,h,d,p,u),b.free(),m.free()}intersectionWithShape(t,r,e,n,s,o,l,h,d,p){let u=c.intoRaw(e),b=R.intoRaw(n),m=s.intoRaw(),E=this.raw.intersectionWithShape(t.raw,r.raw,u,b,m,o,l,h,d,p);return u.free(),b.free(),m.free(),E}projectPoint(t,r,e,n,s,o,l,h,d){let p=c.intoRaw(e),u=lt.fromRaw(r,this.raw.projectPoint(t.raw,r.raw,p,n,s,o,l,h,d));return p.free(),u}projectPointAndGetFeature(t,r,e,n,s,o,l,h){let d=c.intoRaw(e),p=lt.fromRaw(r,this.raw.projectPointAndGetFeature(t.raw,r.raw,d,n,s,o,l,h));return d.free(),p}intersectionsWithPoint(t,r,e,n,s,o,l,h,d){let p=c.intoRaw(e);this.raw.intersectionsWithPoint(t.raw,r.raw,p,n,s,o,l,h,d),p.free()}castShape(t,r,e,n,s,o,l,h,d,p,u,b,m,E){let D=c.intoRaw(e),G=R.intoRaw(n),z=c.intoRaw(s),O=o.intoRaw(),K=dt.fromRaw(r,this.raw.castShape(t.raw,r.raw,D,G,z,O,l,h,d,p,u,b,m,E));return D.free(),G.free(),z.free(),O.free(),K}intersectionsWithShape(t,r,e,n,s,o,l,h,d,p,u){let b=c.intoRaw(e),m=R.intoRaw(n),E=s.intoRaw();this.raw.intersectionsWithShape(t.raw,r.raw,b,m,E,o,l,h,d,p,u),b.free(),m.free(),E.free()}collidersWithAabbIntersectingAabb(t,r,e){let n=c.intoRaw(t),s=c.intoRaw(r);this.raw.collidersWithAabbIntersectingAabb(n,s,e),n.free(),s.free()}}class qt{constructor(t){this.raw=t||new se}free(){this.raw&&this.raw.free(),this.raw=void 0}serializeAll(t,r,e,n,s,o,l,h,d){let p=c.intoRaw(t);const u=this.raw.serializeAll(p,r.raw,e.raw,n.raw,s.raw,o.raw,l.raw,h.raw,d.raw);return p.free(),u}deserializeAll(t){return Dt.fromRaw(this.raw.deserializeAll(t))}}class Or{constructor(t,r){this.vertices=t,this.colors=r}}class Wr{constructor(t){this.raw=t||new ee}free(){this.raw&&this.raw.free(),this.raw=void 0,this.vertices=void 0,this.colors=void 0}render(t,r,e,n,s){this.raw.render(t.raw,r.raw,e.raw,n.raw,s.raw),this.vertices=this.raw.vertices(),this.colors=this.raw.colors()}}class Br{}class Ur{constructor(t,r,e,n,s){this.params=r,this.bodies=e,this.colliders=n,this.queries=s,this.raw=new ie(t),this.rawCharacterCollision=new mr,this._applyImpulsesToDynamicBodies=!1,this._characterMass=null}free(){this.raw&&(this.raw.free(),this.rawCharacterCollision.free()),this.raw=void 0,this.rawCharacterCollision=void 0}up(){return this.raw.up()}setUp(t){let r=c.intoRaw(t);return this.raw.setUp(r)}applyImpulsesToDynamicBodies(){return this._applyImpulsesToDynamicBodies}setApplyImpulsesToDynamicBodies(t){this._applyImpulsesToDynamicBodies=t}characterMass(){return this._characterMass}setCharacterMass(t){this._characterMass=t}offset(){return this.raw.offset()}setOffset(t){this.raw.setOffset(t)}normalNudgeFactor(){return this.raw.normalNudgeFactor()}setNormalNudgeFactor(t){this.raw.setNormalNudgeFactor(t)}slideEnabled(){return this.raw.slideEnabled()}setSlideEnabled(t){this.raw.setSlideEnabled(t)}autostepMaxHeight(){return this.raw.autostepMaxHeight()}autostepMinWidth(){return this.raw.autostepMinWidth()}autostepIncludesDynamicBodies(){return this.raw.autostepIncludesDynamicBodies()}autostepEnabled(){return this.raw.autostepEnabled()}enableAutostep(t,r,e){this.raw.enableAutostep(t,r,e)}disableAutostep(){return this.raw.disableAutostep()}maxSlopeClimbAngle(){return this.raw.maxSlopeClimbAngle()}setMaxSlopeClimbAngle(t){this.raw.setMaxSlopeClimbAngle(t)}minSlopeSlideAngle(){return this.raw.minSlopeSlideAngle()}setMinSlopeSlideAngle(t){this.raw.setMinSlopeSlideAngle(t)}snapToGroundDistance(){return this.raw.snapToGroundDistance()}enableSnapToGround(t){this.raw.enableSnapToGround(t)}disableSnapToGround(){this.raw.disableSnapToGround()}snapToGroundEnabled(){return this.raw.snapToGroundEnabled()}computeColliderMovement(t,r,e,n,s){let o=c.intoRaw(r);this.raw.computeColliderMovement(this.params.dt,this.bodies.raw,this.colliders.raw,this.queries.raw,t.handle,o,this._applyImpulsesToDynamicBodies,this._characterMass,e,n,this.colliders.castClosure(s)),o.free()}computedMovement(){return c.fromRaw(this.raw.computedMovement())}computedGrounded(){return this.raw.computedGrounded()}numComputedCollisions(){return this.raw.numComputedCollisions()}computedCollision(t,r){if(this.raw.computedCollision(t,this.rawCharacterCollision)){let e=this.rawCharacterCollision;return r=r??new Br,r.translationDeltaApplied=c.fromRaw(e.translationDeltaApplied()),r.translationDeltaRemaining=c.fromRaw(e.translationDeltaRemaining()),r.toi=e.toi(),r.witness1=c.fromRaw(e.worldWitness1()),r.witness2=c.fromRaw(e.worldWitness2()),r.normal1=c.fromRaw(e.worldNormal1()),r.normal2=c.fromRaw(e.worldNormal2()),r.collider=this.colliders.get(e.handle()),r}else return null}}class Dt{constructor(t,r,e,n,s,o,l,h,d,p,u,b,m,E){this.gravity=t,this.integrationParameters=new vr(r),this.islands=new xr(e),this.broadPhase=new Fr(n),this.narrowPhase=new Hr(s),this.bodies=new Rr(o),this.colliders=new Xr(l),this.impulseJoints=new Tr(h),this.multibodyJoints=new Nr(d),this.ccdSolver=new kr(p),this.queryPipeline=new zr(u),this.physicsPipeline=new Gr(b),this.serializationPipeline=new qt(m),this.debugRenderPipeline=new Wr(E),this.characterControllers=new Set,this.impulseJoints.finalizeDeserialization(this.bodies),this.bodies.finalizeDeserialization(this.colliders),this.colliders.finalizeDeserialization(this.bodies)}free(){this.integrationParameters.free(),this.islands.free(),this.broadPhase.free(),this.narrowPhase.free(),this.bodies.free(),this.colliders.free(),this.impulseJoints.free(),this.multibodyJoints.free(),this.ccdSolver.free(),this.queryPipeline.free(),this.physicsPipeline.free(),this.serializationPipeline.free(),this.debugRenderPipeline.free(),this.characterControllers.forEach(t=>t.free()),this.integrationParameters=void 0,this.islands=void 0,this.broadPhase=void 0,this.narrowPhase=void 0,this.bodies=void 0,this.colliders=void 0,this.ccdSolver=void 0,this.impulseJoints=void 0,this.multibodyJoints=void 0,this.queryPipeline=void 0,this.physicsPipeline=void 0,this.serializationPipeline=void 0,this.debugRenderPipeline=void 0,this.characterControllers=void 0}static fromRaw(t){return t?new Dt(c.fromRaw(t.takeGravity()),t.takeIntegrationParameters(),t.takeIslandManager(),t.takeBroadPhase(),t.takeNarrowPhase(),t.takeBodies(),t.takeColliders(),t.takeImpulseJoints(),t.takeMultibodyJoints()):null}takeSnapshot(){return this.serializationPipeline.serializeAll(this.gravity,this.integrationParameters,this.islands,this.broadPhase,this.narrowPhase,this.bodies,this.colliders,this.impulseJoints,this.multibodyJoints)}static restoreSnapshot(t){return new qt().deserializeAll(t)}debugRender(){return this.debugRenderPipeline.render(this.bodies,this.colliders,this.impulseJoints,this.multibodyJoints,this.narrowPhase),new Or(this.debugRenderPipeline.vertices,this.debugRenderPipeline.colors)}step(t,r){this.physicsPipeline.step(this.gravity,this.integrationParameters,this.islands,this.broadPhase,this.narrowPhase,this.bodies,this.colliders,this.impulseJoints,this.multibodyJoints,this.ccdSolver,t,r),this.queryPipeline.update(this.bodies,this.colliders)}propagateModifiedBodyPositionsToColliders(){this.bodies.raw.propagateModifiedBodyPositionsToColliders(this.colliders.raw)}updateSceneQueries(){this.propagateModifiedBodyPositionsToColliders(),this.queryPipeline.update(this.bodies,this.colliders)}get timestep(){return this.integrationParameters.dt}set timestep(t){this.integrationParameters.dt=t}get lengthUnit(){return this.integrationParameters.lengthUnit}set lengthUnit(t){this.integrationParameters.lengthUnit=t}get numSolverIterations(){return this.integrationParameters.numSolverIterations}set numSolverIterations(t){this.integrationParameters.numSolverIterations=t}get numAdditionalFrictionIterations(){return this.integrationParameters.numAdditionalFrictionIterations}set numAdditionalFrictionIterations(t){this.integrationParameters.numAdditionalFrictionIterations=t}get numInternalPgsIterations(){return this.integrationParameters.numInternalPgsIterations}set numInternalPgsIterations(t){this.integrationParameters.numInternalPgsIterations=t}switchToStandardPgsSolver(){this.integrationParameters.switchToStandardPgsSolver()}switchToSmallStepsPgsSolver(){this.integrationParameters.switchToSmallStepsPgsSolver()}switchToSmallStepsPgsSolverWithoutWarmstart(){this.integrationParameters.switchToSmallStepsPgsSolverWithoutWarmstart()}createRigidBody(t){return this.bodies.createRigidBody(this.colliders,t)}createCharacterController(t){let r=new Ur(t,this.integrationParameters,this.bodies,this.colliders,this.queryPipeline);return this.characterControllers.add(r),r}removeCharacterController(t){this.characterControllers.delete(t),t.free()}createCollider(t,r){let e=r?r.handle:void 0;return this.colliders.createCollider(this.bodies,t,e)}createImpulseJoint(t,r,e,n){return this.impulseJoints.createJoint(this.bodies,t,r.handle,e.handle,n)}createMultibodyJoint(t,r,e,n){return this.multibodyJoints.createJoint(t,r.handle,e.handle,n)}getRigidBody(t){return this.bodies.get(t)}getCollider(t){return this.colliders.get(t)}getImpulseJoint(t){return this.impulseJoints.get(t)}getMultibodyJoint(t){return this.multibodyJoints.get(t)}removeRigidBody(t){this.bodies&&this.bodies.remove(t.handle,this.islands,this.colliders,this.impulseJoints,this.multibodyJoints)}removeCollider(t,r){this.colliders&&this.colliders.remove(t.handle,this.islands,this.bodies,r)}removeImpulseJoint(t,r){this.impulseJoints&&this.impulseJoints.remove(t.handle,r)}removeMultibodyJoint(t,r){this.impulseJoints&&this.multibodyJoints.remove(t.handle,r)}forEachCollider(t){this.colliders.forEach(t)}forEachRigidBody(t){this.bodies.forEach(t)}forEachActiveRigidBody(t){this.bodies.forEachActiveRigidBody(this.islands,t)}castRay(t,r,e,n,s,o,l,h){return this.queryPipeline.castRay(this.bodies,this.colliders,t,r,e,n,s,o?o.handle:null,l?l.handle:null,this.colliders.castClosure(h))}castRayAndGetNormal(t,r,e,n,s,o,l,h){return this.queryPipeline.castRayAndGetNormal(this.bodies,this.colliders,t,r,e,n,s,o?o.handle:null,l?l.handle:null,this.colliders.castClosure(h))}intersectionsWithRay(t,r,e,n,s,o,l,h,d){this.queryPipeline.intersectionsWithRay(this.bodies,this.colliders,t,r,e,n,s,o,l?l.handle:null,h?h.handle:null,this.colliders.castClosure(d))}intersectionWithShape(t,r,e,n,s,o,l,h){let d=this.queryPipeline.intersectionWithShape(this.bodies,this.colliders,t,r,e,n,s,o?o.handle:null,l?l.handle:null,this.colliders.castClosure(h));return d!=null?this.colliders.get(d):null}projectPoint(t,r,e,n,s,o,l){return this.queryPipeline.projectPoint(this.bodies,this.colliders,t,r,e,n,s?s.handle:null,o?o.handle:null,this.colliders.castClosure(l))}projectPointAndGetFeature(t,r,e,n,s,o){return this.queryPipeline.projectPointAndGetFeature(this.bodies,this.colliders,t,r,e,n?n.handle:null,s?s.handle:null,this.colliders.castClosure(o))}intersectionsWithPoint(t,r,e,n,s,o,l){this.queryPipeline.intersectionsWithPoint(this.bodies,this.colliders,t,this.colliders.castClosure(r),e,n,s?s.handle:null,o?o.handle:null,this.colliders.castClosure(l))}castShape(t,r,e,n,s,o,l,h,d,p,u,b){return this.queryPipeline.castShape(this.bodies,this.colliders,t,r,e,n,s,o,l,h,d,p?p.handle:null,u?u.handle:null,this.colliders.castClosure(b))}intersectionsWithShape(t,r,e,n,s,o,l,h,d){this.queryPipeline.intersectionsWithShape(this.bodies,this.colliders,t,r,e,this.colliders.castClosure(n),s,o,l?l.handle:null,h?h.handle:null,this.colliders.castClosure(d))}collidersWithAabbIntersectingAabb(t,r,e){this.queryPipeline.collidersWithAabbIntersectingAabb(t,r,this.colliders.castClosure(e))}contactPairsWith(t,r){this.narrowPhase.contactPairsWith(t.handle,this.colliders.castClosure(r))}intersectionPairsWith(t,r){this.narrowPhase.intersectionPairsWith(t.handle,this.colliders.castClosure(r))}contactPair(t,r,e){this.narrowPhase.contactPair(t.handle,r.handle,e)}intersectionPair(t,r){return this.narrowPhase.intersectionPair(t.handle,r.handle)}}var Rt;(function(a){a[a.NONE=0]="NONE",a[a.COLLISION_EVENTS=1]="COLLISION_EVENTS",a[a.CONTACT_FORCE_EVENTS=2]="CONTACT_FORCE_EVENTS"})(Rt||(Rt={}));class qr{free(){this.raw&&this.raw.free(),this.raw=void 0}collider1(){return this.raw.collider1()}collider2(){return this.raw.collider2()}totalForce(){return c.fromRaw(this.raw.total_force())}totalForceMagnitude(){return this.raw.total_force_magnitude()}maxForceDirection(){return c.fromRaw(this.raw.max_force_direction())}maxForceMagnitude(){return this.raw.max_force_magnitude()}}class oe{constructor(t,r){this.raw=r||new fr(t)}free(){this.raw&&this.raw.free(),this.raw=void 0}drainCollisionEvents(t){this.raw.drainCollisionEvents(t)}drainContactForceEvents(t){let r=new qr;this.raw.drainContactForceEvents(e=>{r.raw=e,t(r),r.free()})}clear(){this.raw.clear()}}var vt;(function(a){a[a.NONE=0]="NONE",a[a.FILTER_CONTACT_PAIRS=1]="FILTER_CONTACT_PAIRS",a[a.FILTER_INTERSECTION_PAIRS=2]="FILTER_INTERSECTION_PAIRS"})(vt||(vt={}));var Xt;(function(a){a[a.EMPTY=0]="EMPTY",a[a.COMPUTE_IMPULSE=1]="COMPUTE_IMPULSE"})(Xt||(Xt={}));var Ct;(function(a){a[a.DYNAMIC_DYNAMIC=1]="DYNAMIC_DYNAMIC",a[a.DYNAMIC_KINEMATIC=12]="DYNAMIC_KINEMATIC",a[a.DYNAMIC_FIXED=2]="DYNAMIC_FIXED",a[a.KINEMATIC_KINEMATIC=52224]="KINEMATIC_KINEMATIC",a[a.KINEMATIC_FIXED=8704]="KINEMATIC_FIXED",a[a.FIXED_FIXED=32]="FIXED_FIXED",a[a.DEFAULT=15]="DEFAULT",a[a.ALL=60943]="ALL"})(Ct||(Ct={}));class Jt{constructor(t,r,e,n){this.colliderSet=t,this.handle=r,this._parent=e,this._shape=n}finalizeDeserialization(t){this.handle!=null&&(this._parent=t.get(this.colliderSet.raw.coParent(this.handle)))}ensureShapeIsCached(){this._shape||(this._shape=M.fromRaw(this.colliderSet.raw,this.handle))}get shape(){return this.ensureShapeIsCached(),this._shape}isValid(){return this.colliderSet.raw.contains(this.handle)}translation(){return c.fromRaw(this.colliderSet.raw.coTranslation(this.handle))}rotation(){return R.fromRaw(this.colliderSet.raw.coRotation(this.handle))}isSensor(){return this.colliderSet.raw.coIsSensor(this.handle)}setSensor(t){this.colliderSet.raw.coSetSensor(this.handle,t)}setShape(t){let r=t.intoRaw();this.colliderSet.raw.coSetShape(this.handle,r),r.free(),this._shape=t}setEnabled(t){this.colliderSet.raw.coSetEnabled(this.handle,t)}isEnabled(){return this.colliderSet.raw.coIsEnabled(this.handle)}setRestitution(t){this.colliderSet.raw.coSetRestitution(this.handle,t)}setFriction(t){this.colliderSet.raw.coSetFriction(this.handle,t)}frictionCombineRule(){return this.colliderSet.raw.coFrictionCombineRule(this.handle)}setFrictionCombineRule(t){this.colliderSet.raw.coSetFrictionCombineRule(this.handle,t)}restitutionCombineRule(){return this.colliderSet.raw.coRestitutionCombineRule(this.handle)}setRestitutionCombineRule(t){this.colliderSet.raw.coSetRestitutionCombineRule(this.handle,t)}setCollisionGroups(t){this.colliderSet.raw.coSetCollisionGroups(this.handle,t)}setSolverGroups(t){this.colliderSet.raw.coSetSolverGroups(this.handle,t)}contactSkin(){return this.colliderSet.raw.coContactSkin(this.handle)}setContactSkin(t){return this.colliderSet.raw.coSetContactSkin(this.handle,t)}activeHooks(){return this.colliderSet.raw.coActiveHooks(this.handle)}setActiveHooks(t){this.colliderSet.raw.coSetActiveHooks(this.handle,t)}activeEvents(){return this.colliderSet.raw.coActiveEvents(this.handle)}setActiveEvents(t){this.colliderSet.raw.coSetActiveEvents(this.handle,t)}activeCollisionTypes(){return this.colliderSet.raw.coActiveCollisionTypes(this.handle)}setContactForceEventThreshold(t){return this.colliderSet.raw.coSetContactForceEventThreshold(this.handle,t)}contactForceEventThreshold(){return this.colliderSet.raw.coContactForceEventThreshold(this.handle)}setActiveCollisionTypes(t){this.colliderSet.raw.coSetActiveCollisionTypes(this.handle,t)}setDensity(t){this.colliderSet.raw.coSetDensity(this.handle,t)}setMass(t){this.colliderSet.raw.coSetMass(this.handle,t)}setMassProperties(t,r,e){let n=c.intoRaw(r);this.colliderSet.raw.coSetMassProperties(this.handle,t,n,e),n.free()}setTranslation(t){this.colliderSet.raw.coSetTranslation(this.handle,t.x,t.y)}setTranslationWrtParent(t){this.colliderSet.raw.coSetTranslationWrtParent(this.handle,t.x,t.y)}setRotation(t){this.colliderSet.raw.coSetRotation(this.handle,t)}setRotationWrtParent(t){this.colliderSet.raw.coSetRotationWrtParent(this.handle,t)}shapeType(){return this.colliderSet.raw.coShapeType(this.handle)}halfExtents(){return c.fromRaw(this.colliderSet.raw.coHalfExtents(this.handle))}setHalfExtents(t){const r=c.intoRaw(t);this.colliderSet.raw.coSetHalfExtents(this.handle,r)}radius(){return this.colliderSet.raw.coRadius(this.handle)}setRadius(t){this.colliderSet.raw.coSetRadius(this.handle,t)}roundRadius(){return this.colliderSet.raw.coRoundRadius(this.handle)}setRoundRadius(t){this.colliderSet.raw.coSetRoundRadius(this.handle,t)}halfHeight(){return this.colliderSet.raw.coHalfHeight(this.handle)}setHalfHeight(t){this.colliderSet.raw.coSetHalfHeight(this.handle,t)}vertices(){return this.colliderSet.raw.coVertices(this.handle)}indices(){return this.colliderSet.raw.coIndices(this.handle)}heightfieldHeights(){return this.colliderSet.raw.coHeightfieldHeights(this.handle)}heightfieldScale(){let t=this.colliderSet.raw.coHeightfieldScale(this.handle);return c.fromRaw(t)}parent(){return this._parent}friction(){return this.colliderSet.raw.coFriction(this.handle)}restitution(){return this.colliderSet.raw.coRestitution(this.handle)}density(){return this.colliderSet.raw.coDensity(this.handle)}mass(){return this.colliderSet.raw.coMass(this.handle)}volume(){return this.colliderSet.raw.coVolume(this.handle)}collisionGroups(){return this.colliderSet.raw.coCollisionGroups(this.handle)}solverGroups(){return this.colliderSet.raw.coSolverGroups(this.handle)}containsPoint(t){let r=c.intoRaw(t),e=this.colliderSet.raw.coContainsPoint(this.handle,r);return r.free(),e}projectPoint(t,r){let e=c.intoRaw(t),n=wt.fromRaw(this.colliderSet.raw.coProjectPoint(this.handle,e,r));return e.free(),n}intersectsRay(t,r){let e=c.intoRaw(t.origin),n=c.intoRaw(t.dir),s=this.colliderSet.raw.coIntersectsRay(this.handle,e,n,r);return e.free(),n.free(),s}castShape(t,r,e,n,s,o,l,h){let d=c.intoRaw(t),p=c.intoRaw(e),u=R.intoRaw(n),b=c.intoRaw(s),m=r.intoRaw(),E=st.fromRaw(this.colliderSet,this.colliderSet.raw.coCastShape(this.handle,d,m,p,u,b,o,l,h));return d.free(),p.free(),u.free(),b.free(),m.free(),E}castCollider(t,r,e,n,s,o){let l=c.intoRaw(t),h=c.intoRaw(e),d=dt.fromRaw(this.colliderSet,this.colliderSet.raw.coCastCollider(this.handle,l,r.handle,h,n,s,o));return l.free(),h.free(),d}intersectsShape(t,r,e){let n=c.intoRaw(r),s=R.intoRaw(e),o=t.intoRaw(),l=this.colliderSet.raw.coIntersectsShape(this.handle,o,n,s);return n.free(),s.free(),o.free(),l}contactShape(t,r,e,n){let s=c.intoRaw(r),o=R.intoRaw(e),l=t.intoRaw(),h=it.fromRaw(this.colliderSet.raw.coContactShape(this.handle,l,s,o,n));return s.free(),o.free(),l.free(),h}contactCollider(t,r){return it.fromRaw(this.colliderSet.raw.coContactCollider(this.handle,t.handle,r))}castRay(t,r,e){let n=c.intoRaw(t.origin),s=c.intoRaw(t.dir),o=this.colliderSet.raw.coCastRay(this.handle,n,s,r,e);return n.free(),s.free(),o}castRayAndGetNormal(t,r,e){let n=c.intoRaw(t.origin),s=c.intoRaw(t.dir),o=ht.fromRaw(this.colliderSet.raw.coCastRayAndGetNormal(this.handle,n,s,r,e));return n.free(),s.free(),o}}var $;(function(a){a[a.Density=0]="Density",a[a.Mass=1]="Mass",a[a.MassProps=2]="MassProps"})($||($={}));class T{constructor(t){this.enabled=!0,this.shape=t,this.massPropsMode=$.Density,this.density=1,this.friction=.5,this.restitution=0,this.rotation=R.identity(),this.translation=c.zeros(),this.isSensor=!1,this.collisionGroups=4294967295,this.solverGroups=4294967295,this.frictionCombineRule=_t.Average,this.restitutionCombineRule=_t.Average,this.activeCollisionTypes=Ct.DEFAULT,this.activeEvents=Rt.NONE,this.activeHooks=vt.NONE,this.mass=0,this.centerOfMass=c.zeros(),this.contactForceEventThreshold=0,this.contactSkin=0,this.principalAngularInertia=0,this.rotationsEnabled=!0}static ball(t){const r=new rr(t);return new T(r)}static capsule(t,r){const e=new sr(t,r);return new T(e)}static segment(t,r){const e=new ar(t,r);return new T(e)}static triangle(t,r,e){const n=new or(t,r,e);return new T(n)}static roundTriangle(t,r,e,n){const s=new _r(t,r,e,n);return new T(s)}static polyline(t,r){const e=new lr(t,r);return new T(e)}static trimesh(t,r,e){const n=new cr(t,r,e);return new T(n)}static cuboid(t,r){const e=new ir(t,r);return new T(e)}static roundCuboid(t,r,e){const n=new nr(t,r,e);return new T(n)}static halfspace(t){const r=new er(t);return new T(r)}static heightfield(t,r){const e=new wr(t,r);return new T(e)}static convexHull(t){const r=new St(t,!1);return new T(r)}static convexPolyline(t){const r=new St(t,!0);return new T(r)}static roundConvexHull(t,r){const e=new yt(t,r,!1);return new T(e)}static roundConvexPolyline(t,r){const e=new yt(t,r,!0);return new T(e)}setTranslation(t,r){if(typeof t!="number"||typeof r!="number")throw TypeError("The translation components must be numbers.");return this.translation={x:t,y:r},this}setRotation(t){return this.rotation=t,this}setSensor(t){return this.isSensor=t,this}setEnabled(t){return this.enabled=t,this}setContactSkin(t){return this.contactSkin=t,this}setDensity(t){return this.massPropsMode=$.Density,this.density=t,this}setMass(t){return this.massPropsMode=$.Mass,this.mass=t,this}setMassProperties(t,r,e){return this.massPropsMode=$.MassProps,this.mass=t,c.copy(this.centerOfMass,r),this.principalAngularInertia=e,this}setRestitution(t){return this.restitution=t,this}setFriction(t){return this.friction=t,this}setFrictionCombineRule(t){return this.frictionCombineRule=t,this}setRestitutionCombineRule(t){return this.restitutionCombineRule=t,this}setCollisionGroups(t){return this.collisionGroups=t,this}setSolverGroups(t){return this.solverGroups=t,this}setActiveHooks(t){return this.activeHooks=t,this}setActiveEvents(t){return this.activeEvents=t,this}setActiveCollisionTypes(t){return this.activeCollisionTypes=t,this}setContactForceEventThreshold(t){return this.contactForceEventThreshold=t,this}}class Xr{constructor(t){this.raw=t||new P,this.map=new jt,t&&t.forEachColliderHandle(r=>{this.map.set(r,new Jt(this,r,null))})}free(){this.raw&&this.raw.free(),this.raw=void 0,this.map&&this.map.clear(),this.map=void 0}castClosure(t){return r=>{if(t)return t(this.get(r))}}finalizeDeserialization(t){this.map.forEach(r=>r.finalizeDeserialization(t))}createCollider(t,r,e){let n=e!=null&&e!=null;if(n&&isNaN(e))throw Error("Cannot create a collider with a parent rigid-body handle that is not a number.");let s=r.shape.intoRaw(),o=c.intoRaw(r.translation),l=R.intoRaw(r.rotation),h=c.intoRaw(r.centerOfMass),d=this.raw.createCollider(r.enabled,s,o,l,r.massPropsMode,r.mass,h,r.principalAngularInertia,r.density,r.friction,r.restitution,r.frictionCombineRule,r.restitutionCombineRule,r.isSensor,r.collisionGroups,r.solverGroups,r.activeCollisionTypes,r.activeHooks,r.activeEvents,r.contactForceEventThreshold,r.contactSkin,n,n?e:0,t.raw);s.free(),o.free(),l.free(),h.free();let p=n?t.get(e):null,u=new Jt(this,d,p,r.shape);return this.map.set(d,u),u}remove(t,r,e,n){this.raw.remove(t,r.raw,e.raw,n),this.unmap(t)}unmap(t){this.map.delete(t)}get(t){return this.map.get(t)}len(){return this.map.len()}contains(t){return this.get(t)!=null}forEach(t){this.map.forEach(t)}getAll(){return this.map.getAll()}}function _e(){return te()}const le=Object.freeze(Object.defineProperty({__proto__:null,get ActiveCollisionTypes(){return Ct},get ActiveEvents(){return Rt},get ActiveHooks(){return vt},Ball:rr,BroadPhase:Fr,CCDSolver:kr,Capsule:sr,CharacterCollision:Br,get CoefficientCombineRule(){return _t},Collider:Jt,ColliderDesc:T,ColliderSet:Xr,ColliderShapeCastHit:dt,ConvexPolygon:St,Cuboid:ir,DebugRenderBuffers:Or,DebugRenderPipeline:Wr,EventQueue:oe,get FeatureType(){return nt},FixedImpulseJoint:Cr,FixedMultibodyJoint:jr,HalfSpace:er,Heightfield:wr,ImpulseJoint:q,ImpulseJointSet:Tr,IntegrationParameters:vr,IslandManager:xr,get JointAxesMask(){return Wt},JointData:Z,get JointType(){return x},KinematicCharacterController:Ur,get MassPropsMode(){return $},get MotorModel(){return Ot},MultibodyJoint:rt,MultibodyJointSet:Nr,NarrowPhase:Hr,PhysicsPipeline:Gr,PointColliderProjection:lt,PointProjection:wt,Polyline:lr,PrismaticImpulseJoint:Pr,PrismaticMultibodyJoint:Mr,get QueryFilterFlags(){return Ut},QueryPipeline:zr,Ray:ae,RayColliderHit:Mt,RayColliderIntersection:ct,RayIntersection:ht,RevoluteImpulseJoint:Ar,RevoluteMultibodyJoint:Dr,RigidBody:zt,RigidBodyDesc:L,RigidBodySet:Rr,get RigidBodyType(){return H},RopeImpulseJoint:Er,RotationOps:R,RoundConvexPolygon:yt,RoundCuboid:nr,RoundTriangle:_r,Segment:ar,SerializationPipeline:qt,Shape:M,ShapeCastHit:st,ShapeContact:it,get ShapeType(){return j},get SolverFlags(){return Xt},SpringImpulseJoint:Ir,TempContactForceEvent:qr,TempContactManifold:Lr,TriMesh:cr,get TriMeshFlags(){return Bt},Triangle:or,UnitImpulseJoint:Qt,UnitMultibodyJoint:tr,Vector2:yr,VectorOps:c,World:Dt,version:_e},Symbol.toStringTag,{value:"Module"}));export{Ct as ActiveCollisionTypes,Rt as ActiveEvents,vt as ActiveHooks,rr as Ball,Fr as BroadPhase,kr as CCDSolver,sr as Capsule,Br as CharacterCollision,_t as CoefficientCombineRule,Jt as Collider,T as ColliderDesc,Xr as ColliderSet,dt as ColliderShapeCastHit,St as ConvexPolygon,ir as Cuboid,Or as DebugRenderBuffers,Wr as DebugRenderPipeline,oe as EventQueue,nt as FeatureType,Cr as FixedImpulseJoint,jr as FixedMultibodyJoint,er as HalfSpace,wr as Heightfield,q as ImpulseJoint,Tr as ImpulseJointSet,vr as IntegrationParameters,xr as IslandManager,Wt as JointAxesMask,Z as JointData,x as JointType,Ur as KinematicCharacterController,$ as MassPropsMode,Ot as MotorModel,rt as MultibodyJoint,Nr as MultibodyJointSet,Hr as NarrowPhase,Gr as PhysicsPipeline,lt as PointColliderProjection,wt as PointProjection,lr as Polyline,Pr as PrismaticImpulseJoint,Mr as PrismaticMultibodyJoint,Ut as QueryFilterFlags,zr as QueryPipeline,ae as Ray,Mt as RayColliderHit,ct as RayColliderIntersection,ht as RayIntersection,Ar as RevoluteImpulseJoint,Dr as RevoluteMultibodyJoint,zt as RigidBody,L as RigidBodyDesc,Rr as RigidBodySet,H as RigidBodyType,Er as RopeImpulseJoint,R as RotationOps,yt as RoundConvexPolygon,nr as RoundCuboid,_r as RoundTriangle,ar as Segment,qt as SerializationPipeline,M as Shape,st as ShapeCastHit,it as ShapeContact,j as ShapeType,Xt as SolverFlags,Ir as SpringImpulseJoint,qr as TempContactForceEvent,Lr as TempContactManifold,cr as TriMesh,Bt as TriMeshFlags,or as Triangle,Qt as UnitImpulseJoint,tr as UnitMultibodyJoint,yr as Vector2,c as VectorOps,Dt as World,le as default,_e as version};
